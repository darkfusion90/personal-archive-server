{"version":3,"sources":["store/states/posts-state/posts-adapter.ts","theme/theme.ts","theme/persist-theme.ts","theme/index.ts","store/states/filter-state/FilterState.ts","store/states/theme-state/theme-slice.ts","store/states/theme-state/theme-selectors.ts","store/states/theme-state/index.ts","api/account.ts","features/EditAccountDialog/EditAccountDialog.tsx","components/SelectPostTags.tsx","features/EditAccountDialog/components/EditAccountForm/EditAccountForm-View.tsx","features/EditAccountDialog/components/EditAccountForm/EditAccountForm-Connector.tsx","api/posts/posts-get.ts","api/posts/posts-create.ts","api/posts/posts-delete.ts","api/posts/posts-edit.ts","api/axios.ts","features/PostForm/validator.ts","store/states/account-state/actions/update-account-action.ts","utils/simplify-axios-error.ts","store/states/account-state/actions/login-action.ts","store/states/account-state/actions/logout-action.ts","store/states/account-state/actions/create-account-action.ts","store/states/account-state/actions/edit-account-action.ts","store/states/account-state/actions/reset-password-action.ts","store/states/account-state/actions/multifactor-auth.ts","features/PostForm/typings/index.ts","features/EditAccountDialog/index.ts","components/form-fields/OutlinedTextFormField.tsx","features/PostForm/PostForm-View.tsx","store/states/account-state/account-selectors.ts","hooks/useAccount.ts","api/auth/login-api.ts","api/auth/logout-api.ts","store/models/UserModel.ts","api/auth/status-api.ts","store/models/AccountModel.ts","store/models/AuthDetails.ts","api/auth/register-api.ts","api/auth/multifactor.ts","api/auth/email-verification.ts","api/auth/password-reset.ts","api/auth/device-verification.ts","store/states/posts-state/actions/get-all-posts.ts","store/states/posts-state/actions/create-post.ts","store/states/posts-state/actions/delete-post.ts","store/states/posts-state/actions/edit-post.ts","utils/unwrap-axios-thunk-result.ts","components/form-fields/TextFormField.tsx","hooks/useAppTheme.ts","theme/AppThemeProvider.tsx","features/SplashScreen/SplashScreen.tsx","components/HighlightTypography.tsx","hooks/useFilter.ts","features/PostList/components/PostTitle.tsx","features/PostList/components/PostComment.tsx","features/PostList/components/PostTags.tsx","features/PostList/components/PostMeta.tsx","components/LinkTypography.tsx","features/PostList/components/PostLink.tsx","features/PostList/components/PostSubtitle.tsx","store/states/posts-state/posts-selectors.ts","hooks/usePosts.ts","hooks/useSinglePost.ts","features/PostList/components/DeletePostDialog.tsx","features/PostList/components/MoreOptionsMenu.tsx","features/PostList/components/PostActions.tsx","features/PostList/components/PostListItem.tsx","features/PostList/components/AddPostFab.tsx","features/PostList/components/PostList-Skeleton.tsx","features/PostList/components/NoPostsView.tsx","features/PostFilterDialog/components/PostFilterForm/PostFilterForm-View.tsx","features/PostFilterDialog/components/PostFilterForm/PostFilterForm-Connector.tsx","features/PostFilterDialog/components/PostFilterForm/index.ts","features/PostFilterDialog/index.ts","features/PostFilterDialog/PostFilterDialog.tsx","features/PostList/components/PostListFilter.tsx","features/PostList/constants.ts","features/PostList/PostList-View.tsx","features/PostList/index.ts","features/PostList/PostList-Connector.tsx","routes/pages/HomePage.tsx","components/form-fields/PasswordField.tsx","routes/pages/LoginPage/LoginPage-View.tsx","routes/pages/LoginPage/LoginPage-Container.tsx","routes/pages/LoginPage/index.ts","routes/pages/LoginPage/LoginPage-FormConnector.tsx","routes/pages/CreatePostPage/CreatePostPage-View.tsx","routes/pages/CreatePostPage/index.ts","routes/pages/CreatePostPage/CreatePostPage-FormConnector.tsx","routes/pages/RegisterPage/RegisterPage-View.tsx","routes/pages/RegisterPage/validator.ts","routes/pages/RegisterPage/index.ts","routes/pages/RegisterPage/RegisterPage-Connector.tsx","features/LoadingDialog.tsx","routes/pages/EditPostPage/EditPostPage-View.tsx","routes/pages/EditPostPage/EditPostPage-FormConnector.tsx","hooks/useAsyncState.ts","routes/pages/EditPostPage/index.ts","routes/pages/EditPostPage/EditPostPage-DataConnector.tsx","routes/pages/AccountPage/components/SettingCard.tsx","hooks/useAsyncAction.ts","routes/pages/AccountPage/components/AccountMultifactor.tsx","routes/pages/AccountPage/components/AccountActionButton.tsx","routes/pages/AccountPage/components/AccountEmail.tsx","routes/pages/AccountPage/components/AccountUsername.tsx","routes/pages/AccountPage/components/AccountPassword.tsx","routes/pages/AccountPage/AccountPage.tsx","routes/pages/AccountPage/index.ts","components/UnderlinedLink.tsx","components/InfoContainer.tsx","components/AsyncContainer.tsx","routes/pages/EmailVerification/index.ts","routes/pages/EmailVerification/EmailVerification.tsx","routes/pages/PasswordReset/components/PasswordResetForm/PasswordResetForm-View.tsx","routes/pages/PasswordReset/components/PasswordResetForm/validator.ts","routes/pages/PasswordReset/components/PasswordResetForm/index.ts","routes/pages/PasswordReset/components/PasswordResetForm/PasswordResetForm-Connector.tsx","routes/routes.ts","routes/pages/PasswordReset/PasswordReset.tsx","routes/pages/InitiatePasswordReset/InitiatePasswordReset.tsx","routes/pages/DeviceVerification/DeviceVerification.tsx","routes/index.ts","features/AppBar/components/AccountAvatar/AccountMenu.tsx","features/AppBar/components/AccountAvatar/AccountAvatar.tsx","features/AppBar/components/AccountActions.tsx","features/AppBar/components/ThemeSwitcher.tsx","features/AppBar/AppBar.tsx","features/AppScaffold/AppScaffold.tsx","routes/pages/PageNotFound.tsx","app/App.tsx","app/index.ts","index.tsx","api/index.ts","store/states/account-state/account-slice.ts","store/states/account-state/index.ts","store/states/posts-state/posts-slice.ts","store/states/posts-state/index.ts","store/utils/async-match-fulfilled.ts","store/states/account-state/middlewares/index.ts","store/states/account-state/middlewares/monitor-login.ts","store/states/posts-state/middlewares/index.ts","store/states/posts-state/middlewares/monitor-posts-filter.ts","store/middlewares.ts","store/store.ts","store/index.ts","components/LoadingButton.tsx","hooks/useForm.ts","api/posts/index.ts","store/states/filter-state/filter-slice.ts","features/PostForm/index.ts","store/models/PostModel.ts","store/states/filter-state/filter-selectors.ts","components/FormSubmitButton.tsx"],"names":["postsAdapter","createEntityAdapter","commonPalette","primary","main","purple","contrastText","secondary","deepOrange","darkTheme","createMuiTheme","palette","type","background","default","paper","text","action","focus","divider","lightTheme","persistTheme","setTheme","theme","localStorage","setItem","clearTheme","removeItem","getTheme","getItem","initialState","sort","order","tags","activeTheme","getStoredTheme","themeSlice","createSlice","name","reducers","setActiveTheme","_","payload","themeReducer","reducer","actions","selectActiveTheme","createSelector","state","themeState","ThemeState","editAccount","toEdit","value","console","log","axios","put","EditAccountDialog","props","color","variant","form","kFormId","renderSelect","input","currentValue","onChange","fieldLabel","getOptionLabel","id","multiple","selectOnFocus","clearOnBlur","options","filterOptions","inputValue","filtered","label","push","trim","option","renderInput","params","placeholder","renderTags","getTagProps","map","tag","index","newValue","reason","details","Array","isArray","unique","Object","values","toRemove","filter","val","SelectPostTags","component","EditAccountFormView","formState","formId","onFormSubmit","onSubmit","TextFormField","disabled","status","reduxForm","handleSubmit","useAccount","useForm","successSnackbarMessage","failureSnackbarMessage","formActions","toEditValue","setFormSubmitting","then","unwrapAxiosError","editAccountAsync","setFormSubmitSuccess","catch","setFormSubmitFail","buildQuery","searchQuery","query","reqQuery","keys","key","join","getPosts","a","opts","get","responseData","data","posts","postFromJson","getPostById","postId","createPost","postData","post","deletePost","delete","editPost","create","withCredentials","createPostFormValidator","errors","title","validator","isEmpty","link","isURL","require_protocol","updateAccountAsync","createAsyncThunk","auth","simplifyAxiosError","response","statusText","loginAsync","loginData","thunkApi","login","rejectWithValue","logoutAsync","logout","createAccountAsync","accountData","register","resetPasswordAsync","attemptPasswordReset","enableMultifactorAuthAsync","enableMultifactorAuth","disableMultifactorAuthAsync","disableMultifactorAuth","OutlinedTextFormField","useStyles","makeStyles","createStyles","fullHeight","height","header","marginBottom","spacing","subtitle","typography","subtitle2","fontWeight","fontWeightRegular","PostFormView","formStatus","formActionText","classes","Grid","container","wrap","direction","justify","className","item","Typography","autoFocus","required","FormSubmitButton","accountSelector","account","accountStateSelector","autoFetch","React","useState","accountFetchStatus","setAccountStatus","dispatch","useAppDispatch","useEffect","unwrapResult","updateAccount","useSelector","createAccount","multifactor","enableMultifactor","disableMultifactor","resetPassword","loading","success","failure","uninitiated","userFromJson","json","username","email","createdAt","Date","user","undefined","loggedIn","emailVerified","multifactorAuthEnabled","jsonToAuthDetails","getUrl","endpoint","todo","token","requestEmailVerification","checkEmailVerificationToken","url","requestPasswordResetToken","passwordResetToken","password","checkPasswordResetToken","requestDeviceVerificationToken","performDeviceVerification","deviceVerificationToken","getAllPostsAsync","filterState","getState","selectFilterState","createPostAsync","deletePostAsync","Promise","reject","editPostAsync","actionToMatch","result","fulfilled","match","rejected","renderField","meta","touched","error","textFieldProps","hasError","fullWidth","children","useAppTheme","AppThemeProvider","setThemeLocally","ThemeProvider","root","fontFamily","SplashScreen","LinearProgress","alignItems","highlight","backgroundColor","HighlightTypography","typographyProps","TypographyWithProps","clsx","trimmedQuery","toLowerCase","textLower","queryLength","length","results","indexOf","parse","queryMatcher","renderHighlighted","renderNormal","useFilter","setFilter","resetFilter","fontWeightBold","textDecoration","transition","outline","blue","PostTitle","postTitle","trimmedTitle","titleLength","strippedTitle","substring","ellipsis","displayTitle","href","target","PostComment","comment","paragraph","display","flexWrap","margin","marginLeft","light","PostTags","remainingTagsCount","slice","Math","min","Chip","clickable","size","dotSeparator","PostMeta","creationDate","dateFormat","alignContent","LinkTypography","to","linkOutsideApp","linkProps","Link","subtitle1","verticalAlign","PostLink","PostSubtitle","selectors","getSelectors","selectAll","selectById","selectTotal","usePosts","postsStatus","setPostsStatus","setError","err","updatePosts","selectAllPosts","updateAllPosts","useSinglePost","DeletePostDialog","isDeleting","onDeletePost","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","onClick","onClose","LoadingButton","disableElevation","CustomMenuItem","Icon","icon","linkTo","Boolean","MenuItem","ListItemIcon","ListItemText","MoreOptionsMenu","editPostUrl","Menu","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","EditIcon","DeleteIcon","marginTop","PostActions","dialogOpen","setDialogOpen","closeDeleteConfirmationDialog","openDeleteConfirmationDialog","menuAnchorEl","setMenuAnchorEl","enqueueSnackbar","useSnackbar","deletePostState","setDeletePostState","handleDeletePost","setTimeout","routeMap","path","replace","Hidden","xsDown","Tooltip","IconButton","smUp","event","currentTarget","open","keepMounted","anchorEl","postActionRoot","PostListItem","hasHighlighted","setHasHighlighted","ListItem","selected","secondaryTypographyProps","ListItemSecondaryAction","fab","position","right","bottom","zIndex","AddPostFab","history","useHistory","WaveSkeleton","Skeleton","animation","PostListSkeleton","skeletons","itemClassName","subheader","List","fill","NoPostsView","align","breakpoints","up","minWidth","width","SortTypeComponent","FormControl","FormLabel","RadioGroup","FormControlLabel","control","Radio","SortOrderComponent","PostFilterFormView","Field","WithForm","afterSetFilter","formValues","PostFilterForm","connect","initialValues","PostFilterDialog","fullScreen","useMediaQuery","down","disableEscapeKeyDown","fontSize","PostListFilter","startIcon","constants","itemThemeSpacingUnit","listSubheader","subheaderMainTitle","flexGrow","PostListView","highlightPost","isLoading","filterTags","ListSubheader","disableSticky","Helmet","Container","maxWidth","filterDesc","noMatchingPosts","primaryTypographyProps","postListBody","renderPosts","PostList","onUpdatePosts","HomePage","useLocation","PasswordField","showPassword","setShowPassword","InputProps","endAdornment","InputAdornment","padding","red","LoginError","loginError","isSmallScreen","isExtraSmallScreen","Alert","severity","style","LoginPageView","isLoggingIn","loginResult","home","Divider","LoginPageContainer","otherProps","snackbarShown","setSnackbarShown","onEnter","LoginPage","setLoggingIn","setLoginError","setLoginResult","performLogin","unwrapAxiosThunkResult","errResponse","message","CreatePostPageView","PostForm","CreatePostPage","validate","createdPost","pathname","stringTags","RegisterPageView","registerError","ensureNotEmpty","isEmail","RegisterPage","formData","unknownError","dialogContent","LoadingDialog","loadingText","disableBackdropClick","CircularProgress","EditPostPageView","postFetchStatus","postNotReady","editPostFormValidator","editedPost","useAsyncState","setState","setUninitiated","setLoading","setSuccess","setFailure","EditPostPage","fetchState","useParams","fetchPost","getInitialValues","fade","lighten","paddingTop","paddingBottom","SettingCard","infoProps","Paper","elevation","SettingCardInfo","extra","titleVariant","sm","SettingCardAction","useAsyncAction","actionState","asyncActions","performAction","arg","res","AccountMultifactor","Subtitle","AccountMultifactorMeta","AccountMultifactorAction","AccountActionButton","AccountEmail","AccountEmailMeta","AccountEmailVerificationAlert","AccountUsername","AccountPassword","initiatePasswordReset","AccountPage","UnderlinedLink","flexDirection","justifyContent","InfoContainer","AsyncContainer","asyncStatus","contents","errorContent","successContent","EmailVerification","tokenCheckStatus","verifyToken","PasswordResetFormView","passwordResetFormValidator","confirmPassword","equals","PasswordResetForm","exact","CreatePostPageForm","verifyEmail","passwordReset","tokenCheckActions","resetFormState","tokenGenStatus","tokenGenStateActions","deviceVerification","deviceVerificationStatus","routes","loggedInAs","marginRight","AccountMenu","anchorElement","onCloseMenu","NavLink","noWrap","AccountAvatar","isAccountLoading","menuAnchorElement","setMenuAnchorElement","LinkButton","LoginButton","ThemeSwitcher","isDarkTheme","DarkThemeIcon","LightThemeIcon","kStyleRemoveLink","grey","noLink","AppBar","Toolbar","AccountActions","AppScaffold","PageNotFound","AppContent","route","App","titleTemplate","defaultTitle","ReactDOM","render","store","CssBaseline","document","getElementById","extraReducers","builder","addCase","AccountState","getInitialState","setAll","removeOne","asyncMatchFulfilled","asyncAction","api","next","actionsThatChangeLoginInfo","some","initialFilterState","accountStateMiddlewares","postsMiddlewares","configureStore","accountReducer","postsReducer","filterReducer","formReducer","middleware","getDefaultMiddleware","serializableCheck","concat","middlewares","useDispatch","stateIcon","buttonProps","thickness","setFormState","filterSlice","userId","updatedAt"],"mappings":"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","file":"static/js/main.e6bdc0d4.chunk.js","sourcesContent":["import { createEntityAdapter } from \"@reduxjs/toolkit\";\nimport PostModel from \"../../models/PostModel\";\n\nconst postsAdapter = createEntityAdapter<PostModel>()\n\nexport default postsAdapter","import { createMuiTheme } from '@material-ui/core/styles'\nimport { purple, deepOrange } from '@material-ui/core/colors'\nimport { PaletteOptions } from '@material-ui/core/styles/createPalette'\n\nconst commonPalette: PaletteOptions = {\n    primary: {\n        main: purple[500],\n        contrastText: '#fff'\n    },\n    secondary: {\n        main: deepOrange[500]\n    }\n}\n\nexport const darkTheme = createMuiTheme({\n    palette: {\n        ...commonPalette,\n        type: 'dark',\n        background: {\n            default: '#121212',\n            paper: '#0e0e0e',\n        },\n        text: {\n            primary: '#fff'\n        },\n        action: {\n            focus: '#f00'\n        },\n        divider: '#dedede'\n    }\n})\n\nexport const lightTheme = createMuiTheme({\n    palette: {\n        ...commonPalette,\n        divider: '#121212',\n        type: 'light'\n    }\n})","import { IAppTheme } from \"../store/states/theme-state/ThemeState\"\n\nconst kLocalStorageThemeKey = 'personal-archive-theme'\n\nconst persistTheme = {\n    setTheme: (theme: IAppTheme) => {\n        localStorage.setItem(kLocalStorageThemeKey, theme)\n    },\n    clearTheme: () => {\n        localStorage.removeItem(kLocalStorageThemeKey)\n    },\n    getTheme: (): IAppTheme | null => {\n        const theme = localStorage.getItem(kLocalStorageThemeKey)\n        // Only load applicable theme\n        if (theme === 'dark' || theme === 'light') {\n            return theme\n        }\n\n        return null\n    }\n}\n\nexport default persistTheme","import { lightTheme, darkTheme } from './theme'\nimport persistTheme from './persist-theme'\n\nexport { lightTheme, darkTheme }\nexport const { getTheme, setTheme, clearTheme } = persistTheme","export type FilterSortTechnique = 'title' | 'date'\nexport type FilterSortOrder = 'asc' | 'desc'\n\ninterface FilterState {\n    query?: string\n    sort: FilterSortTechnique\n    order: FilterSortOrder\n    tags: string[]\n}\n\nexport const initialState: FilterState = {\n    sort: 'title',\n    order: 'asc',\n    tags: []\n}\n\nexport default FilterState","import { createSlice, SliceCaseReducers, PayloadAction } from \"@reduxjs/toolkit\";\nimport { ThemeState } from \"./ThemeState\";\nimport { getTheme as getStoredTheme } from \"../../../theme\";\n\nconst initialState: ThemeState = {\n    activeTheme: getStoredTheme() || 'dark'\n}\n\nconst themeSlice = createSlice<ThemeState, SliceCaseReducers<ThemeState>>({\n    name: 'theme-state',\n    initialState,\n    reducers: {\n        setActiveTheme: (_, action: PayloadAction<ThemeState['activeTheme']>) => ({\n            activeTheme: action.payload\n        })\n    }\n})\n\nexport const themeReducer = themeSlice.reducer\n\nexport const { setActiveTheme } = themeSlice.actions","import { RootState } from \"../../store\";\nimport { Selector, createSelector } from \"@reduxjs/toolkit\";\nimport ThemeState from \".\";\n\nexport const selectThemeState: Selector<RootState, ThemeState> = (state) => state.theme\n\nexport const selectActiveTheme: Selector<\n    RootState,\n    ThemeState['activeTheme']\n> = createSelector<RootState, ThemeState, ThemeState['activeTheme']>(\n    selectThemeState,\n    (themeState) => themeState.activeTheme\n)","import { ThemeState } from './ThemeState'\n\nexport default ThemeState\nexport * from './theme-slice'\nexport * from './theme-selectors'","import axios from \"./axios\"\n\nexport const editAccount = ({ toEdit, value }: { toEdit: 'username' | 'email', value: string }) => {\n    console.log({ [toEdit]: value })\n    return axios.put('/api/account', { [toEdit]: value })\n}","import React from 'react'\nimport { Button, Dialog, DialogTitle, DialogContent, DialogActions } from '@material-ui/core'\n\nimport { IEditAccountDialog } from './typings'\nimport { EditAccountForm, kFormId } from './components'\n\nconst EditAccountDialog: IEditAccountDialog = ({ toEdit, ...props }) => {\n    return (\n        <Dialog {...props}>\n            <DialogTitle>Edit Account</DialogTitle>\n            <DialogContent>\n                <EditAccountForm toEdit={toEdit} />\n            </DialogContent>\n            <DialogActions>\n                <Button color='primary' variant='contained' type='submit' form={kFormId}>\n                    Confirm Edit\n                </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\n\nexport * from './typings/EditAccountDialog'\nexport default EditAccountDialog\n","import React from 'react'\nimport { Field, WrappedFieldProps } from 'redux-form'\n\nimport TextField from '@material-ui/core/TextField'\nimport Chip from '@material-ui/core/Chip'\nimport AutoComplete, { AutocompleteRenderInputParams } from '@material-ui/lab/Autocomplete'\n\nexport interface IPostTag {\n    value: string\n    label: string\n}\n\ninterface ISelectPostTagsProps {\n    fieldLabel?: string\n    getOptionLabel?: ValueCallback<IPostTag['value'], IPostTag['label']>\n}\n\ntype IRenderSelectProps = ISelectPostTagsProps & WrappedFieldProps\n\nconst renderSelect = ({\n    input: {\n        value: currentValue,\n        onChange\n    },\n    fieldLabel,\n    getOptionLabel\n}: IRenderSelectProps) => {\n    return (\n        <AutoComplete<IPostTag, true>\n            id=\"tags-outlined\"\n            multiple\n            selectOnFocus\n            clearOnBlur\n            options={[]}\n            filterOptions={(_, { inputValue }) => {\n                const filtered: IPostTag[] = []\n                if (inputValue !== '') {\n                    const label = getOptionLabel ?\n                        getOptionLabel(inputValue) :\n                        `Create tag \"${inputValue}\"`\n\n                    filtered.push({\n                        value: inputValue.trim(),\n                        label\n                    })\n                }\n\n                return filtered\n            }}\n            getOptionLabel={(option) => option.label}\n            renderInput={(params: AutocompleteRenderInputParams) => (\n                <TextField\n                    {...params}\n                    variant=\"outlined\"\n                    label={fieldLabel || \"Create Tags\"}\n                    placeholder=\"Tags\"\n                />\n            )}\n            renderTags={(value, getTagProps) => value.map((tag, index) => {\n                return (\n                    <Chip\n                        label={tag.value}\n                        {...getTagProps({ index })}\n                    />\n                )\n            })}\n            onChange={(_, newValue, reason, details) => {\n                if (!Array.isArray(newValue)) {\n                    return null\n                }\n\n                if (reason === 'create-option' || reason === 'select-option') {\n                    // Only unique tags allowed\n                    const unique: { [k: string]: IPostTag } = {}\n                    for (let tag of newValue) {\n                        unique[tag.value] = tag\n                    }\n\n                    onChange(Object.values(unique))\n                }\n\n                if (reason === 'remove-option' && details) {\n                    const toRemove = details.option\n                    const filtered = currentValue.filter((val: IPostTag) => {\n                        return val.value !== toRemove.value\n                    })\n\n                    onChange(filtered)\n                }\n            }}\n            value={currentValue || []}\n        />\n    )\n}\n\nconst SelectPostTags: React.FC<ISelectPostTagsProps> = ({\n    fieldLabel,\n    getOptionLabel\n}) => {\n    return (\n        <Field\n            name='tags'\n            component={renderSelect}\n            fieldLabel={fieldLabel}\n            getOptionLabel={getOptionLabel}\n        />\n    )\n}\n\nexport default SelectPostTags\n","import React from 'react'\nimport { IEditAccountFormView } from '../../typings/EditAccountForm-View'\nimport TextFormField from '../../../../components/form-fields/TextFormField'\n\nconst EditAccountFormView: IEditAccountFormView = ({ formState, toEdit, formId, onFormSubmit }) => {\n    return (\n        <form id={formId} onSubmit={onFormSubmit}>\n            <TextFormField\n                variant='outlined'\n                name='toEditValue'\n                label={'Enter ' + toEdit}\n                disabled={formState.status === 'submitting'}\n            />\n        </form>\n    )\n}\n\nexport default EditAccountFormView\n","import React from 'react'\nimport { IEditAccountFormConnector, IEditAccountFormData, IEditAccountFormConnectorOwnProps } from '../../typings/EditAccountForm-Connector'\nimport { reduxForm } from 'redux-form'\nimport EditAccountFormView from './EditAccountForm-View'\nimport useForm from '../../../../hooks/useForm'\nimport useAccount from '../../../../hooks/useAccount'\nimport { editAccountAsync } from '../../../../store/states/account-state/actions'\nimport unwrapAxiosError from '../../../../utils/unwrap-axios-thunk-result'\n\nexport const kFormId = 'edit-account'\n\nconst EditAccountFormConnector: IEditAccountFormConnector = ({ handleSubmit, toEdit }) => {\n    const { editAccount } = useAccount()[1]\n    const [formState, formActions] = useForm({\n        successSnackbarMessage: 'Account successfully edited',\n        failureSnackbarMessage: 'Failed to edit account'\n    })\n\n    const submitForm = ({ toEditValue }: IEditAccountFormData) => {\n        formActions.setFormSubmitting()\n\n        editAccount(toEdit, toEditValue)\n            .then(unwrapAxiosError(editAccountAsync))\n            .then(() => formActions.setFormSubmitSuccess())\n            .catch(formActions.setFormSubmitFail)\n    }\n\n    return <EditAccountFormView\n        formState={formState}\n        toEdit={toEdit}\n        formId={kFormId}\n        onFormSubmit={handleSubmit(submitForm)}\n    />\n}\n\nexport default reduxForm<IEditAccountFormData, IEditAccountFormConnectorOwnProps>({\n    form: kFormId\n})(EditAccountFormConnector)\n","import axios from \"../axios\";\nimport PostModel, { postFromJson } from \"../../store/models/PostModel\";\n\nexport interface IGetPostsOpts {\n    query?: string\n    tags?: string\n    sort?: string\n    order?: string\n}\n\nfunction buildQuery({\n    query: searchQuery,\n    tags,\n    sort,\n    order\n}: IGetPostsOpts) {\n    const reqQuery: any = {}\n    if (searchQuery) {\n        reqQuery.query = searchQuery\n    }\n\n    if (sort) {\n        reqQuery.sort = sort\n    }\n\n    if (order) {\n        reqQuery.order = order\n    }\n\n    if (tags) {\n        reqQuery.tags = tags\n    }\n\n    return Object.keys(reqQuery).map(key => `${key}=${reqQuery[key]}`).join('&')\n}\n\nexport const getPosts = async (opts: IGetPostsOpts = {}): Promise<PostModel[]> => {\n    const { data: responseData } = await axios.get(`/api/posts?${buildQuery(opts)}`)\n\n    return responseData.posts.map(postFromJson)\n}\n\nexport const getPostById = async (postId: string): Promise<PostModel | null> => {\n    const { data } = await axios.get(`/api/posts/${postId}`)\n\n    return postFromJson(data)\n}","import PostModel, { postFromJson } from \"../../store/models/PostModel\"\nimport axios from \"../axios\"\nimport { IPostData } from \"./shared\"\n\nexport const createPost = async (postData: IPostData): Promise<PostModel | null> => {\n    const { data } = await axios.post(`/api/posts/`, postData)\n\n    return postFromJson(data)\n}","import axios from \"../axios\"\n\nexport const deletePost = async (postId: string) => axios.delete(`/api/posts/${postId}`)","import PostModel, { postFromJson } from \"../../store/models/PostModel\"\nimport axios from \"../axios\"\nimport { IPostData } from \"./shared\"\n\nexport const editPost = async (id: string, postData: IPostData): Promise<PostModel | null> => {\n    const { data } = await axios.put(`/api/posts/${id}`, postData)\n\n    return postFromJson(data)\n}","import axios from 'axios'\n\nexport default axios.create({ withCredentials: true })","import { IPostFormData } from \"./typings\";\n\nimport validator from 'validator'\n\ntype ErrorMap = {\n    [k in keyof IPostFormData]: string\n}\n\nexport default function createPostFormValidator(values: IPostFormData): ErrorMap {\n    const errors = {} as ErrorMap\n    if (typeof values.title === 'string' && validator.isEmpty(values.title)) {\n        errors.title = 'Title is required'\n    }\n\n    if (values.link && !validator.isEmpty(values.link.trim())) {\n        if (!validator.isURL(values.link, { require_protocol: true })) {\n            errors.link = 'If provided, must be an url'\n        }\n    }\n\n    return errors\n}","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { auth } from \"../../../../api\";\nimport AccountModel from \"../../../models/AccountModel\";\n\nconst updateAccountAsync = createAsyncThunk<AccountModel>('updateAccountAsync', auth.status)\n\nexport default updateAccountAsync","import { AxiosError } from \"axios\";\n\nexport default function simplifyAxiosError({ response }: AxiosError): SimplifiedAxiosResponse | undefined {\n    if (!response) {\n        return \n    }\n\n    return {\n        data: response.data,\n        status: response.status,\n        statusText: response.statusText\n    }\n}","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { auth } from \"../../../../api\";\nimport { simplifyAxiosError } from \"../../../../utils\";\n\nconst loginAsync = createAsyncThunk<any, LoginData>('loginAsync', async (loginData, thunkApi) => {\n    try {\n        return (await auth.login(loginData)).data\n    } catch (err) {\n        console.log('Login Error: ', err)\n        console.log('Response: ', err.response)\n        return thunkApi.rejectWithValue(simplifyAxiosError(err))\n    }\n})\n\nexport default loginAsync","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { auth } from \"../../../../api\";\n\nconst logoutAsync = createAsyncThunk('logoutAsync', auth.logout)\n\nexport default logoutAsync","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { auth } from \"../../../../api\";\nimport { simplifyAxiosError } from \"../../../../utils\";\n\nconst createAccountAsync = createAsyncThunk<any, RegisterData>(\n    'createAccountAsync',\n    async (accountData, thunkApi) => {\n        try {\n            return (await auth.register(accountData)).data\n        } catch (err) {\n            console.log('Register Error: ', err)\n            console.log('Response: ', err.response)\n            return thunkApi.rejectWithValue(simplifyAxiosError(err))\n        }\n    }\n)\n\nexport default createAccountAsync","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { editAccount } from \"../../../../api/account\";\n\nconst editAccountAsync = createAsyncThunk<any, {\n    toEdit: 'username' | 'email',\n    value: string\n}>('editAccountAsync', editAccount)\n\nexport default editAccountAsync","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { attemptPasswordReset } from \"../../../../api/auth\";\nimport { simplifyAxiosError } from \"../../../../utils\";\n\ninterface ResetPasswordArgs {\n    passwordResetToken: string,\n    password: string\n}\n\nconst resetPasswordAsync = createAsyncThunk<any, ResetPasswordArgs>('resetPasswordAsync', async (data, thunkApi) => {\n    try {\n        return await attemptPasswordReset(data)\n    } catch (err) {\n        console.log('inside action err: ', err)\n        return thunkApi.rejectWithValue(simplifyAxiosError(err))\n    }\n})\n\nexport default resetPasswordAsync","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { enableMultifactorAuth, disableMultifactorAuth } from \"../../../../api/auth\";\n\nexport const enableMultifactorAuthAsync = createAsyncThunk<any>(\n    'enableMultifactorAuth',\n    enableMultifactorAuth\n)\n\nexport const disableMultifactorAuthAsync = createAsyncThunk<any>(\n    'disableMultifactorAuth',\n    disableMultifactorAuth\n)","export * from './PostForm-VIew'\nexport * from './PostFormData'","import EditAccountDialog from './EditAccountDialog'\n\nexport * from './EditAccountDialog'\nexport default EditAccountDialog","import React from 'react'\nimport TextFormField, { ITextFormFieldProps } from './TextFormField'\n\nconst OutlinedTextFormField: React.FC<ITextFormFieldProps> = (props) => {\n    return <TextFormField {...props} variant='outlined' />\n}\n\nexport default OutlinedTextFormField\n","import React from 'react'\n\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\nimport Grid from '@material-ui/core/Grid'\nimport Typography from '@material-ui/core/Typography'\n\nimport FormSubmitButton from '../../components/FormSubmitButton'\nimport SelectPostTags from '../../components/SelectPostTags'\nimport OutlinedTextFormField from '../../components/form-fields/OutlinedTextFormField'\nimport { IPostFormView } from './typings'\n\nconst useStyles = makeStyles((theme) => createStyles({\n    fullHeight: {\n        height: '100%'\n    },\n    header: {\n        marginBottom: theme.spacing(4)\n    },\n    subtitle: {\n        ...theme.typography.subtitle2,\n        color: theme.palette.text.secondary,\n        fontWeight: theme.typography.fontWeightRegular\n    }\n}))\n\nconst PostFormView: IPostFormView = ({\n    formId,\n    onFormSubmit,\n    status: formStatus,\n    formActionText,\n    header\n}) => {\n    const classes = useStyles()\n\n    return (\n        <Grid\n            container\n            wrap='wrap'\n            direction='column'\n            justify='center'\n            spacing={4}\n            className={classes.fullHeight}\n            component='form'\n            id={formId}\n            onSubmit={onFormSubmit}\n        >\n            <Grid item container direction='column' className={classes.header}>\n                <Grid item>\n                    <Typography variant='h4'>\n                        {header}\n                    </Typography>\n                </Grid>\n                <Grid item>\n                    <Typography className={classes.subtitle}>\n                        Required items are marked with *\n                        </Typography>\n                </Grid>\n            </Grid>\n\n            <Grid item>\n                <OutlinedTextFormField name='title' label='Title' autoFocus required />\n            </Grid>\n            <Grid item>\n                <OutlinedTextFormField name='link' label='Link' />\n            </Grid>\n            <Grid item>\n                <OutlinedTextFormField name='comment' label='Comment' />\n            </Grid>\n            <Grid item>\n                <SelectPostTags />\n            </Grid>\n            <Grid item>\n                <FormSubmitButton\n                    formId={formId}\n                    formState={formStatus}\n                    color='primary'\n                    variant='contained'\n                >\n                    {formActionText}\n                </FormSubmitButton>\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default PostFormView","import { Selector } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../../store\";\nimport AccountState from \"./AccountState\";\nimport AccountModel from \"../../models/AccountModel\";\n\nexport const accountStateSelector: Selector<RootState, AccountState> = (state) => state.account\n\nexport const accountSelector: Selector<RootState, AccountModel> = (state) => accountStateSelector(state).account\n","import React from 'react'\nimport { useSelector } from 'react-redux'\n\nimport AccountModel from '../store/models/AccountModel'\nimport { accountSelector } from '../store/states/account-state/account-selectors'\nimport { editAccountAsync, updateAccountAsync, loginAsync, logoutAsync, createAccountAsync, enableMultifactorAuthAsync, disableMultifactorAuthAsync, resetPasswordAsync } from '../store/states/account-state/actions'\nimport { useAppDispatch } from '../store'\nimport { unwrapResult } from '@reduxjs/toolkit'\n\nexport type IEditableAccountField = 'username' | 'email'\n\ninterface AccountHookOpts {\n    autoFetch: boolean\n}\n\ninterface AccountFetchStatus {\n    loading: boolean\n    success: boolean\n    failure: boolean\n    uninitiated: boolean\n}\n\ninterface MultifactorAccountActions {\n    enableMultifactor: VoidCallback\n    disableMultifactor: VoidCallback\n}\n\ninterface AccountActions {\n    login: ValueCallback<LoginData>\n    logout: VoidCallback\n    createAccount: ValueCallback<RegisterData>\n    updateAccount: VoidCallback\n    editAccount: (toEdit: IEditableAccountField, value: string) => any\n    resetPassword: (data: { passwordResetToken: string, password: string }) => any\n    multifactor: MultifactorAccountActions\n}\n\ntype AccountHook = HookWithMeta<AccountModel, AccountActions, AccountFetchStatus>\n\nconst useAccount = ({ autoFetch }: AccountHookOpts = { autoFetch: false }): AccountHook => {\n    const [accountFetchStatus, setAccountStatus] = React.useState<GenericAsyncState>('uninitiated')\n    const dispatch = useAppDispatch()\n\n    React.useEffect(() => {\n        async function updateAccount() {\n            if (autoFetch) {\n                setAccountStatus('loading')\n                await dispatch(updateAccountAsync())\n                    .then(unwrapResult)\n                    .then((_: any) => setAccountStatus('success'))\n                    .catch((_: any) => setAccountStatus('fail'))\n            }\n        }\n\n        updateAccount()\n    }, [dispatch, autoFetch])\n\n    const account = useSelector(accountSelector)\n\n    return [\n        account,\n        {\n            login: (data) => dispatch(loginAsync(data)),\n            logout: () => dispatch(logoutAsync()),\n            createAccount: (data) => dispatch(createAccountAsync(data)),\n            updateAccount: () => dispatch(updateAccountAsync()),\n            editAccount: (toEdit, value) => dispatch(editAccountAsync({ toEdit, value })),\n            multifactor: {\n                enableMultifactor: () => dispatch(enableMultifactorAuthAsync()),\n                disableMultifactor: () => dispatch(disableMultifactorAuthAsync())\n            },\n            resetPassword: (data) => dispatch(resetPasswordAsync(data))\n        },\n        {\n            loading: accountFetchStatus === 'loading',\n            success: accountFetchStatus === 'success',\n            failure: accountFetchStatus === 'fail',\n            uninitiated: accountFetchStatus === 'uninitiated'\n        }\n    ]\n}\n\nexport default useAccount","import axios from '../axios'\n\nconst login = (loginData: LoginData) => {\n    return axios.post('/api/auth/login', loginData)\n}\n\nexport default login","import axios from '../axios'\n\nconst logout = () => {\n    return axios.post('/api/auth/logout')\n}\n\nexport default logout","interface UserModel {\n    id: string\n    username: string\n    email: string\n    createdAt: Date\n}\n\nexport const userFromJson = (json: any): UserModel => {\n    return {\n        id: json['_id'],\n        username: json['username'],\n        email: json['email'],\n        createdAt: new Date(json['createdAt'])\n    }\n}\n\nexport default UserModel","import axios from '../axios'\nimport AccountModel, { accountFromJson } from '../../store/models/AccountModel'\n\nconst status = async (): Promise<AccountModel> => {\n    const response = await axios.get('/api/auth/status')\n    return accountFromJson(response.data)\n}\n\nexport default status","import UserModel, { userFromJson } from \"./UserModel\";\nimport { AuthDetailModel, jsonToAuthDetails } from \"./AuthDetails\";\n\ninterface AccountModel extends AuthDetailModel {\n    user?: UserModel\n    loggedIn: boolean\n}\n\nexport const accountFromJson = (json: any): AccountModel => {\n    return {\n        user: json['user'] ? userFromJson(json['user']) : undefined,\n        loggedIn: json['loggedIn'],\n        ...jsonToAuthDetails(json)\n    }\n}\n\nexport default AccountModel","export interface AuthDetailModel {\n    emailVerified?: boolean\n    multifactorAuthEnabled?: boolean\n}\n\nexport const jsonToAuthDetails = (json: any): AuthDetailModel => {\n    return {\n        emailVerified: json['emailVerified'],\n        multifactorAuthEnabled: json['multifactorAuthEnabled']\n    }\n}","import axios from '../axios'\n\nconst register = (accountData: LoginData) => {\n    return axios.post('/api/auth/register', accountData)\n}\n\nexport default register","import axios from \"../axios\"\n\nconst getUrl = (endpoint: string) => `/api/auth/multifactor/${endpoint}`\n\nexport const enableMultifactorAuth = () => axios.put(getUrl('enable'))\n\nexport const disableMultifactorAuth = () => axios.put(getUrl('disable'))","import axios from \"../axios\"\n\nconst getUrl = (todo: 'generate' | 'verify', token?: string) => {\n    // For verification, we go to /api/auth/email-verification/verify/:token\n    const endpoint = todo === 'generate' ? todo : `${todo}/${token}`\n\n    return `/api/auth/email-verification/${endpoint}`\n}\n\nexport const requestEmailVerification = () => axios.post(getUrl('generate'))\n\nexport const checkEmailVerificationToken = (token: string) => axios.post(getUrl('verify', token))","import axios from \"../axios\"\n\nconst url = '/api/auth/password-reset'\n\nexport const requestPasswordResetToken = (username: string) =>\n    axios.post(`${url}/generate`, { username })\n\nexport const attemptPasswordReset = ({ passwordResetToken, password }: { passwordResetToken: string, password: string }) =>\n    axios.post(`${url}/reset/${passwordResetToken}`, { password })\n\nexport const checkPasswordResetToken = (passwordResetToken: string) =>\n    axios.get(`${url}/check/${passwordResetToken}`)","import axios from \"../axios\"\n\nconst url = '/api/auth/multifactor'\n\nexport const requestDeviceVerificationToken = () => axios.post(`${url}/generate`)\n\nexport const performDeviceVerification = (deviceVerificationToken: string) => {\n    return axios.post(`${url}/verify/${deviceVerificationToken}`)\n}","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { posts } from \"../../../../api\";\nimport PostModel from \"../../../models/PostModel\";\nimport { selectFilterState } from \"../../filter-state/filter-selectors\";\nimport { RootState } from \"../../../store\";\nimport FilterState from \"../../filter-state/FilterState\";\n\nconst getAllPostsAsync = createAsyncThunk<\n    PostModel[],\n    FilterState | undefined,\n    { state: RootState }\n>('getAllPostsAsync', (filterState, { getState }) => {\n    const filter = filterState || selectFilterState(getState())\n    const { query, sort, order, tags } = filter\n\n    return posts.getPosts({\n        query,\n        sort,\n        order,\n        tags: (tags || []).map(tag => tag).join(',')\n    })\n})\n\nexport default getAllPostsAsync","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { createPost, IPostData } from \"../../../../api/posts\";\nimport PostModel from \"../../../models/PostModel\";\n\nconst createPostAsync = createAsyncThunk<PostModel | null, IPostData>(\n    'createPostAsync',\n    createPost\n)\n\nexport default createPostAsync","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { posts } from \"../../../../api\";\n\nconst deletePostAsync = createAsyncThunk<string, string>(\n    'deletePostAsync',\n    async (postId) => {\n        try {\n            await posts.deletePost(postId)\n            return postId\n        } catch (err) {\n            return Promise.reject(err)\n        }\n    }\n)\n\nexport default deletePostAsync","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { IPostData, editPost } from \"../../../../api/posts\";\n\nconst editPostAsync = createAsyncThunk<void, IPostData & { id: string }>(\n    'editPostAsync',\n    async ({ id, ...post }) => {\n        try {\n            await editPost(id, post)\n        } catch (err) {\n            return Promise.reject(err)\n        }\n    }\n)\n\nexport default editPostAsync","export default function unwrapAxiosError(actionToMatch: any) {\n    return (result: any) => {\n        // If not an async thunk, return the action\n        if (!actionToMatch.fulfilled) {\n            return result\n        }\n\n        if (actionToMatch.fulfilled.match(result)) {\n            return result.payload\n        } else if (actionToMatch.rejected.match(result)) {\n            throw result.payload\n        } else {\n            return result\n        }\n    }\n}","import React from 'react'\nimport TextField, { TextFieldProps } from '@material-ui/core/TextField'\nimport Typography from '@material-ui/core/Typography'\nimport { Field, WrappedFieldProps } from 'redux-form'\n\nexport type ITextFormFieldProps = TextFieldProps & {\n    name: string\n    label: string\n}\n\nconst renderField: React.FC<WrappedFieldProps & ITextFormFieldProps> = ({\n    input,\n    meta: { touched, error },\n    label,\n    ...textFieldProps\n}) => {\n    const hasError = touched && error\n\n    return (\n        <>\n            <TextField\n                fullWidth\n                label={label}\n                error={hasError}\n                {...textFieldProps}\n                {...input}\n            />\n            {hasError && <Typography color='error'>{error}</Typography>}\n        </>\n    )\n}\n\nconst TextFormField: React.FC<ITextFormFieldProps> = ({\n    name,\n    label,\n    children,\n    ...textFieldProps\n}) => {\n    return <Field\n        component={renderField}\n        name={name}\n        label={label}\n        {...textFieldProps as any}\n    />\n}\n\nexport default TextFormField\n\n","import { useSelector } from \"react-redux\"\n\nimport { selectActiveTheme, setActiveTheme } from \"../store/states/theme-state\"\nimport { useAppDispatch } from \"../store\"\nimport { IAppTheme } from \"../store/states/theme-state/ThemeState\"\n\ninterface IUseThemeHookActions {\n    setActiveTheme: ValueCallback<IAppTheme>\n}\n\ntype IUseThemeHook = Hook<IAppTheme, IUseThemeHookActions>\n\nconst useAppTheme = (): IUseThemeHook => {\n    const activeTheme = useSelector(selectActiveTheme)\n    const dispatch = useAppDispatch()\n\n    return [\n        activeTheme,\n        {\n            setActiveTheme: (theme) => dispatch(setActiveTheme(theme))\n        }\n    ]\n}\n\nexport default useAppTheme","import React from 'react'\nimport { ThemeProviderProps, ThemeProvider } from '@material-ui/core'\nimport useAppTheme from '../hooks/useAppTheme'\nimport { darkTheme, lightTheme, setTheme as setThemeLocally } from './'\n\ntype IAppThemeProviderProps = Omit<ThemeProviderProps, 'theme'>\n\nconst AppThemeProvider: React.FC<IAppThemeProviderProps> = (props) => {\n    const [activeTheme] = useAppTheme()\n\n    React.useEffect(() => {\n        // Sets theme to localStorage to persist during page reloads\n        setThemeLocally(activeTheme)\n    }, [activeTheme])\n\n    const getTheme = () => {\n        if (activeTheme === 'dark') {\n            return darkTheme\n        }\n\n        return lightTheme\n    }\n\n    return (\n        <ThemeProvider theme={getTheme()} {...props} />\n    )\n}\n\nexport default AppThemeProvider\n","import React from 'react'\nimport Grid from '@material-ui/core/Grid'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\nimport LinearProgress from '@material-ui/core/LinearProgress'\n\nconst useStyles = makeStyles(createStyles({\n    root: {\n        height: '100%'\n    },\n    typography: {\n        fontFamily: 'Caveat' || 'cursive',\n    }\n}))\n\nconst SplashScreen = () => {\n    const classes = useStyles()\n\n    return (\n        <>\n            <LinearProgress />\n            <Grid\n                container\n                direction='column'\n                alignItems='center'\n                justify='center'\n                className={classes.root}\n            >\n                <Typography variant='h4' className={classes.typography}>\n                    Personal Archive\n            </Typography>\n            </Grid>\n        </>\n    )\n}\n\nexport default SplashScreen\n","import React from 'react'\nimport { TypographyProps, Typography } from '@material-ui/core'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\n\nimport clsx from 'clsx'\nimport parse from 'autosuggest-highlight/parse'\n\ninterface IHighlightTypographyProps extends TypographyProps {\n    query?: string\n    text?: string\n}\n\ntype IHighlightTypography = React.FC<IHighlightTypographyProps>\n\nconst useStyles = makeStyles((theme) => createStyles({\n    highlight: {\n        backgroundColor: theme.palette.secondary.main,\n    }\n}))\n\nconst HighlightTypography: IHighlightTypography = ({ query, text, ...typographyProps }) => {\n    const classes = useStyles()\n\n    const TypographyWithProps: React.FC<TypographyProps> = (props) => {\n        const className = clsx(typographyProps.className, props.className)\n        return <Typography {...typographyProps} {...props} className={className} />\n    }\n\n    if (!query || !text) {\n        return <TypographyWithProps>{text}</TypographyWithProps>\n    }\n\n    const renderHighlighted = (text: string) => {\n        return (\n            // @ts-ignore\n            <TypographyWithProps component='span' className={classes.highlight}>\n                {text}\n            </TypographyWithProps>\n        )\n    }\n\n    const renderNormal = (text: string) => {\n        return (\n            // @ts-ignore\n            <TypographyWithProps component='span'>{text}</TypographyWithProps>\n        )\n    }\n\n    return (\n        <TypographyWithProps>\n            {\n                queryMatcher(text, query).map(({ text, highlight }) => {\n                    return highlight ? renderHighlighted(text) : renderNormal(text)\n                })\n            }\n        </TypographyWithProps>\n    )\n}\n\n// Sincere credits: https://github.com/moroshko/autosuggest-highlight/issues/5#issuecomment-392333344\nfunction queryMatcher(text?: string, query?: string) {\n    if (!(typeof text === 'string' && typeof query === 'string')) {\n        return []\n    }\n\n    const trimmedQuery = query.trim().toLowerCase()\n    const textLower = text.toLowerCase()\n    const queryLength = trimmedQuery.length\n\n    if (textLower.length === 0 && queryLength === 0) {\n        return []\n    }\n\n    const results = []\n    let indexOf = textLower.indexOf(trimmedQuery)\n    while (indexOf > -1) {\n        results.push([indexOf, indexOf + queryLength])\n        indexOf = textLower.indexOf(query, indexOf + queryLength)\n    }\n\n    return parse(text, results)\n}\n\nexport default HighlightTypography\n","import { useSelector } from \"react-redux\"\n\nimport FilterState from \"../store/states/filter-state/FilterState\"\nimport { useAppDispatch } from \"../store\"\nimport { selectFilterState } from \"../store/states/filter-state/filter-selectors\"\nimport { setFilter, resetFilter } from \"../store/states/filter-state/filter-slice\"\n\ninterface IUseFilterHookActions {\n    setFilter: ValueCallback<FilterState>\n    resetFilter: VoidCallback\n}\n\ntype IUseFilterHook = Hook<FilterState, IUseFilterHookActions>\n\nconst useFilter = (): IUseFilterHook => {\n    const dispatch = useAppDispatch()\n    const filter = useSelector(selectFilterState)\n\n    return [\n        filter,\n        {\n            setFilter: (filter) => dispatch(setFilter(filter)),\n            resetFilter: () => dispatch(resetFilter(undefined))\n        }\n    ]\n}\n\nexport default useFilter","import React from 'react'\nimport { IPostTitle } from '../typings/PostTitle'\n\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\nimport { blue } from '@material-ui/core/colors'\nimport HighlightTypography from '../../../components/HighlightTypography'\nimport useFilter from '../../../hooks/useFilter'\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        fontWeight: theme.typography.fontWeightBold,\n        color: 'inherit',\n        textDecoration: 'none',\n        transition: '0.8s color ease-out',\n        outline: 0,\n        '&:hover': {\n            textDecoration: 'none',\n            color: blue[800],\n        }\n    }\n}))\n\nconst kMaxTitleLength = 50\n\nconst PostTitle: IPostTitle = ({ post: { title: postTitle, link } }) => {\n    const classes = useStyles()\n    const [{ query }] = useFilter()\n\n    const trimmedTitle = postTitle.trim()\n    const titleLength = trimmedTitle.length\n    const strippedTitle = trimmedTitle.substring(0, kMaxTitleLength)\n    const ellipsis = titleLength > kMaxTitleLength ? '...' : ''\n    const displayTitle = `${strippedTitle}${ellipsis}`\n\n    return (\n        <HighlightTypography\n            className={classes.root}\n            variant='h5'\n            // @ts-ignore\n            component='a'\n            href={link || '#'}\n            target='_blank'\n            text={displayTitle}\n            query={query}\n        />\n    )\n}\n\nexport default PostTitle\n","import React from 'react'\nimport { IPostComment } from '../typings/PostComment'\n\nimport useFilter from '../../../hooks/useFilter'\nimport HighlightTypography from '../../../components/HighlightTypography'\n\nconst PostComment: IPostComment = ({ post: { comment } }) => {\n    const [{ query }] = useFilter()\n\n    return (\n        <HighlightTypography\n            paragraph\n            text={comment}\n            query={query}\n        />\n    )\n}\n\nexport default PostComment\n","import React from 'react'\nimport { IPostTags } from '../typings/PostTags'\n\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\nimport Chip from '@material-ui/core/Chip'\nimport Typography from '@material-ui/core/Typography'\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        display: 'inline-flex',\n        flexWrap: 'wrap',\n        '& > *': {\n            margin: theme.spacing(0.5),\n        },\n        // To counter the margin applied to first child on the left by '& > *' styling above\n        marginLeft: `-${theme.spacing(0.5)}px`\n    },\n\n    tag: {\n        color: theme.palette.primary.light,\n    }\n}))\n\nconst kMaxVisibleTags = 5\n\nconst PostTags: IPostTags = ({ post: { tags } }) => {\n    const classes = useStyles()\n\n    if (tags.length === 0) {\n        return null\n    }\n\n    const remainingTagsCount = tags.length - kMaxVisibleTags\n\n    const renderSingleTag = (tag: string) => {\n        // In case you're wondering why use color='primary' when already using that in className,\n        // this is why: classes.tag only overrides the text color but the border will remain default\n        // If you don't provide color in the component itself, the text will be fine \n        // but the border will default to grey which doesn't look pretty :D\n        return (\n            <Chip\n                clickable\n                key={tag}\n                className={classes.tag}\n                size='small'\n                variant='outlined'\n                color='primary'\n                label={tag}\n                component='a'\n                target='_blank'\n            />\n        )\n    }\n\n    return (\n        <div className={classes.root}>\n            {tags.slice(0, Math.min(kMaxVisibleTags, tags.length)).map(renderSingleTag)}\n            {\n                remainingTagsCount > 0 ?\n                    <Typography>\n                        + {remainingTagsCount} tags\n                    </Typography> :\n                    null\n            }\n        </div>\n    )\n}\n\nexport default PostTags\n","import React from 'react'\n\nimport Grid from '@material-ui/core/Grid'\nimport Typography from '@material-ui/core/Typography'\nimport DotSeparatorIcon from '@material-ui/icons/FiberManualRecord'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\n\nimport dateFormat from 'date-fns/format'\n\nimport { IPostMeta } from '../typings/PostMeta'\nimport PostTags from './PostTags'\n\nconst useStyles = makeStyles((theme) => createStyles({\n    dotSeparator: {\n        ...theme.typography.subtitle2\n    }\n}))\n\nconst PostMeta: IPostMeta = ({ post }) => {\n    const classes = useStyles()\n    const creationDate = dateFormat(post.createdAt, 'MMM dd, yyyy')\n\n    return (\n        <Grid\n            container\n            wrap='nowrap'\n            alignItems='center'\n            alignContent='center'\n            spacing={2}\n        >\n            <Grid item wrap='nowrap'>\n                <Typography color='textSecondary'>\n                    {creationDate}\n                </Typography>\n            </Grid>\n\n            {post.tags.length > 0 &&\n                <Grid item>\n                    <DotSeparatorIcon className={classes.dotSeparator} />\n                </Grid>\n            }\n\n            <Grid item>\n                <PostTags post={post} />\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default PostMeta\n","import React from 'react'\nimport clsx from 'clsx'\nimport { Link, LinkProps } from 'react-router-dom'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\nimport Typography, { TypographyProps } from '@material-ui/core/Typography'\n\nimport { blue } from '@material-ui/core/colors'\n\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        textDecoration: 'none',\n        transition: '0.8s color ease-out',\n        outline: 0,\n        '&:hover': {\n            textDecoration: 'none',\n            color: blue[800],\n        }\n    },\n}))\n\nexport type ILinkTypographyProps = TypographyProps & LinkProps & { linkOutsideApp?: boolean }\n\nconst LinkTypography: React.FC<ILinkTypographyProps> = ({\n    className,\n    to,\n    linkOutsideApp,\n    ...props\n}) => {\n    const classes = useStyles()\n\n    const linkProps: any = {}\n    if (linkOutsideApp) {\n        linkProps.component = 'a'\n        linkProps.href = to\n        linkProps.target = '_blank'\n    } else {\n        linkProps.component = Link\n        linkProps.to = to\n    }\n\n    return (\n        <Typography\n            className={clsx(className, classes.root)}\n            {...linkProps}\n            {...props}\n        />\n    )\n}\n\nexport default LinkTypography\n","import React from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport LinkIcon from '@material-ui/icons/Link'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\n\nimport { IPostLink } from '../typings/PostLink'\nimport LinkTypography from '../../../components/LinkTypography'\nimport { blue } from '@material-ui/core/colors'\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        ...theme.typography.subtitle1,\n        verticalAlign: 'middle',\n        display: 'inline-flex',\n    },\n    link: {\n        color: blue[600]\n    }\n}))\n\nconst PostLink: IPostLink = ({ post }) => {\n    const classes = useStyles()\n    if (!post.link) {\n        return null\n    }\n\n    return (\n        <Typography className={classes.root}>\n            <LinkIcon />\n            &nbsp;\n            <LinkTypography linkOutsideApp to={post.link} className={classes.link}>\n                {post.link}\n            </LinkTypography>\n        </Typography>\n    )\n}\n\nexport default PostLink","import React from 'react'\n\nimport { IPostSubtitle } from '../typings/PostSubtitle'\nimport PostComment from './PostComment'\nimport PostMeta from './PostMeta'\nimport PostLink from './PostLink'\n\nconst PostSubtitle: IPostSubtitle = ({ post }) => {\n    return (\n        <>\n            <PostLink post={post} />\n            <PostComment post={post} />\n            <PostMeta post={post} />\n        </>\n    )\n}\n\nexport default PostSubtitle","import postsAdapter from \"./posts-adapter\";\nimport { RootState } from \"../../store\";\n\nconst selectors = postsAdapter.getSelectors<RootState>(state => state.posts)\n\nexport const { selectAll, selectById, selectTotal } = selectors\n","import React from 'react'\nimport { useSelector } from 'react-redux'\n\nimport PostModel from '../store/models/PostModel'\nimport { getAllPostsAsync, createPostAsync, editPostAsync } from '../store/states/posts-state/actions'\nimport { useAppDispatch } from '../store'\nimport { selectAll as selectAllPosts } from '../store/states/posts-state/posts-selectors'\n\nimport { IPostData } from '../api/posts'\nimport unwrapAxiosError from '../utils/unwrap-axios-thunk-result'\n\ninterface IUsePostsHookOpts {\n    autoFetch: boolean\n}\n\nexport interface IPostsFetchStatus {\n    loading: boolean\n    success: boolean\n    failure: boolean\n    uninitiated: boolean\n    error?: any\n}\n\ninterface IPostsActions {\n    updateAllPosts: VoidCallback\n    createPost: ValueCallback<IPostData>\n    editPost: ValueCallback<IPostData & { id: string }>\n}\n\ntype IUsePostsHook = HookWithMeta<PostModel[], IPostsActions, IPostsFetchStatus>\n\nconst usePosts = ({ autoFetch }: IUsePostsHookOpts = { autoFetch: false }): IUsePostsHook => {\n    const [postsStatus, setPostsStatus] = React.useState<GenericAsyncState>('uninitiated')\n    const [error, setError] = React.useState<any>()\n    const dispatch = useAppDispatch()\n\n    React.useEffect(() => {\n        async function updatePosts() {\n            if (autoFetch) {\n                setPostsStatus('loading')\n                await dispatch(getAllPostsAsync())\n                    .then(unwrapAxiosError)\n                    .then((_: any) => setPostsStatus('success'))\n                    .catch((err: any) => {\n                        setPostsStatus('fail')\n                        setError(err)\n                    })\n            }\n        }\n\n        updatePosts()\n    }, [dispatch, autoFetch])\n\n    const posts = useSelector(selectAllPosts)\n\n    return [\n        posts,\n        {\n            updateAllPosts: () => dispatch(getAllPostsAsync()),\n            createPost: (data) => dispatch(createPostAsync(data)),\n            editPost: (data) => dispatch(editPostAsync(data))\n        },\n        {\n            loading: postsStatus === 'loading',\n            success: postsStatus === 'success',\n            failure: postsStatus === 'fail',\n            uninitiated: postsStatus === 'uninitiated',\n            error\n        }\n    ]\n}\n\nexport default usePosts\n","import { useSelector } from 'react-redux'\n\nimport PostModel from '../store/models/PostModel'\nimport { useAppDispatch, RootState } from '../store'\nimport { selectById } from '../store/states/posts-state/posts-selectors'\n\nimport usePosts, { IPostsFetchStatus } from './usePosts'\nimport { deletePostAsync } from '../store/states/posts-state/actions'\n\ntype MaybePost = PostModel | undefined\n\ninterface IUseSinglePostHookOpts {\n    autoFetch: boolean\n}\n\ninterface IPostActions {\n    deletePost: VoidCallback<Promise<any>>\n}\n\ntype IUseSinglePostHook = HookWithMeta<MaybePost, IPostActions, IPostsFetchStatus>\n\nconst useSinglePost = (postId: string, { autoFetch }: IUseSinglePostHookOpts = { autoFetch: false }): IUseSinglePostHook => {\n    // eslint-disable-next-line\n    const [_, __, status] = usePosts({ autoFetch })\n    const post = useSelector<RootState, MaybePost>((state) => selectById(state, postId))\n    const dispatch = useAppDispatch()\n\n    return [post, {\n        deletePost: () => dispatch(deletePostAsync(postId))\n    }, status]\n}\n\nexport default useSinglePost\n","import React from 'react'\n\nimport {\n    Button,\n    Dialog,\n    DialogProps,\n    DialogTitle,\n    DialogContent,\n    DialogContentText,\n    DialogActions\n} from '@material-ui/core'\nimport PostModel from '../../../store/models/PostModel'\nimport LoadingButton from '../../../components/LoadingButton'\n\ninterface IDeletePostDialogProps extends DialogProps {\n    post: PostModel\n    isDeleting: boolean\n    onDeletePost: VoidCallback\n}\n\nconst DeletePostDialog: React.FC<IDeletePostDialogProps> = ({\n    post,\n    isDeleting,\n    onDeletePost,\n    ...props\n}) => {\n    return (\n        <Dialog {...props}>\n            <DialogTitle>\n                {`Delete Post titled \"${post.title}\"?`}\n            </DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    This action cannot be undone\n                </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={props.onClose as any}>\n                    Don't Delete\n                </Button>\n                <LoadingButton\n                    disableElevation\n                    loading={isDeleting}\n                    variant='contained'\n                    color='primary'\n                    onClick={onDeletePost}\n                >\n                    Delete Post\n                    </LoadingButton>\n            </DialogActions>\n        </Dialog>\n    )\n}\n\nexport default DeletePostDialog\n","import React from 'react'\nimport { Menu, MenuProps, MenuItem, ListItemIcon, ListItemText, MenuItemProps } from '@material-ui/core'\nimport DeleteIcon from '@material-ui/icons/Delete'\nimport EditIcon from '@material-ui/icons/Edit'\nimport { Link } from 'react-router-dom'\n\ntype IMoreOptionsMenuProps = MenuProps & {\n    onDeletePost: VoidCallback\n    editPostUrl: string\n}\n\nconst MoreOptionsMenu: React.FC<IMoreOptionsMenuProps> = ({\n    onDeletePost,\n    editPostUrl,\n    ...props\n}) => {\n    return (\n        <Menu\n            id='more-options-post'\n            getContentAnchorEl={null}\n            anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n            transformOrigin={{ vertical: 'top', horizontal: 'center' }}\n            {...props}\n        >\n            <CustomMenuItem\n                icon={EditIcon}\n                text='Edit Post'\n                linkTo={editPostUrl}\n            />\n            <CustomMenuItem icon={DeleteIcon} text='Delete Post' onClick={onDeletePost} />\n        </Menu>\n    )\n}\n\ntype CustomMenuItemProps = MenuItemProps & {\n    icon: React.ElementType\n    text: string\n    linkTo?: string\n}\n\nconst CustomMenuItem: React.FC<CustomMenuItemProps> = ({\n    icon: Icon,\n    text,\n    linkTo,\n    ...props\n}) => {\n    const linkProps: any = {}\n    if (Boolean(linkTo)) {\n        linkProps.component = Link\n        linkProps.to = linkTo\n    }\n\n    return (\n        // @ts-ignore\n        <MenuItem {...props} {...linkProps}>\n            <ListItemIcon>\n                <Icon />\n            </ListItemIcon>\n            <ListItemText>\n                {text}\n            </ListItemText>\n        </MenuItem>\n    )\n}\n\nexport default MoreOptionsMenu\n","import React from 'react'\n\nimport DeletePostIcon from '@material-ui/icons/Delete'\nimport MoreOptionsIcon from '@material-ui/icons/MoreVert'\nimport EditPostIcon from '@material-ui/icons/Edit'\nimport IconButton from '@material-ui/core/IconButton'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Hidden from '@material-ui/core/Hidden'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\n\nimport useSinglePost from '../../../hooks/useSinglePost'\nimport { IPostActions } from '../typings/PostActions'\nimport { useSnackbar } from 'notistack'\nimport { unwrapResult } from '@reduxjs/toolkit'\nimport { Link } from 'react-router-dom'\nimport { routeMap } from '../../../routes'\nimport DeletePostDialog from './DeletePostDialog'\nimport MoreOptionsMenu from './MoreOptionsMenu'\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        marginTop: theme.spacing(1)\n    }\n}))\n\nconst PostActions: IPostActions = ({ post }) => {\n    const classes = useStyles()\n    // eslint-disable-next-line\n    const [_, { deletePost }] = useSinglePost(post.id)\n    const [dialogOpen, setDialogOpen] = React.useState(false)\n    const closeDeleteConfirmationDialog = () => setDialogOpen(false)\n    const openDeleteConfirmationDialog = () => setDialogOpen(true)\n\n    const [menuAnchorEl, setMenuAnchorEl] = React.useState<null | HTMLElement>(null);\n\n    const openMoreOptionsMenu = (event: React.MouseEvent<HTMLElement>) => {\n        setMenuAnchorEl(event.currentTarget);\n    };\n\n    const closeMoreOptionsMenu = () => setMenuAnchorEl(null)\n\n    const { enqueueSnackbar } = useSnackbar()\n    const [deletePostState, setDeletePostState] = React.useState<GenericAsyncState>('uninitiated')\n\n    const handleDeletePost = async () => {\n        setDeletePostState('loading')\n        try {\n            await deletePost().then(unwrapResult)\n            setDeletePostState('success')\n            enqueueSnackbar('Post deleted successfully', { variant: 'success' })\n            setTimeout(closeDeleteConfirmationDialog, 500);\n        } catch (err) {\n            setDeletePostState('fail')\n            enqueueSnackbar('Error deleting post', { variant: 'error' })\n        }\n    }\n\n    const editPostUrl = routeMap.editPost.path.replace(':postId', post.id)\n\n    return (\n        <>\n            <div className={classes.root} >\n                <Hidden xsDown>\n                    <Tooltip title='Edit Post'>\n                        <IconButton component={Link} to={editPostUrl}>\n                            <EditPostIcon />\n                        </IconButton>\n                    </Tooltip>\n                    <Tooltip title='Delete Post (clicking will prompt a confirmation)'>\n                        <IconButton onClick={openDeleteConfirmationDialog}>\n                            <DeletePostIcon />\n                        </IconButton>\n                    </Tooltip>\n                </Hidden>\n\n                <Hidden smUp>\n                    <Tooltip title='More Options'>\n                        <IconButton onClick={openMoreOptionsMenu} >\n                            <MoreOptionsIcon />\n                        </IconButton>\n                    </Tooltip>\n                </Hidden>\n            </div>\n            <DeletePostDialog\n                open={dialogOpen}\n                onClose={closeDeleteConfirmationDialog}\n                isDeleting={deletePostState === 'loading'}\n                onDeletePost={handleDeletePost}\n                post={post}\n            />\n            <MoreOptionsMenu\n                keepMounted\n                open={Boolean(menuAnchorEl)}\n                anchorEl={menuAnchorEl}\n                onClose={closeMoreOptionsMenu}\n                onDeletePost={openDeleteConfirmationDialog}\n                editPostUrl={editPostUrl}\n            />\n        </>\n    )\n}\n\nexport default PostActions\n\n","import React from 'react'\n\nimport { ListItem, ListItemText, ListItemSecondaryAction } from '@material-ui/core'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\n\nimport PostTitle from './PostTitle'\nimport PostSubtitle from './PostSubtitle'\nimport PostActions from './PostActions'\nimport { IPostListItem } from '../typings/PostListItem'\n\nconst useStyles = makeStyles((theme) => createStyles({\n    postActionRoot: {\n        height: '100%'\n    },\n    subtitle: {\n        marginTop: theme.spacing(1)\n    }\n}))\n\nconst PostListItem: IPostListItem = ({ post, autoFocus, className }) => {\n    const classes = useStyles()\n    const [hasHighlighted, setHasHighlighted] = React.useState(false)\n\n    React.useEffect(() => {\n        if (autoFocus && !hasHighlighted) {\n            console.log('Will highlight: ', post)\n            setTimeout(() => {\n                setHasHighlighted(true)\n            }, 3000);\n        }\n    }, [post, autoFocus, hasHighlighted, setHasHighlighted])\n\n    return (\n        // @ts-ignore\n        <ListItem\n            className={className}\n            autoFocus={autoFocus}\n            selected={autoFocus && !hasHighlighted}\n        >\n            <ListItemText\n                primary={<PostTitle post={post} />}\n                secondary={<PostSubtitle post={post} />}\n                secondaryTypographyProps={{ component: 'div', className: classes.subtitle }}\n            />\n            <ListItemSecondaryAction className={classes.postActionRoot}>\n                <PostActions post={post} />\n            </ListItemSecondaryAction>\n        </ListItem>\n    )\n}\n\nexport default PostListItem\n","import React from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport FloatingActionButton from '@material-ui/core/Fab'\nimport AddIcon from '@material-ui/icons/Add'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\nimport { routeMap } from '../../../routes'\n\nconst useStyles = makeStyles((theme) => createStyles({\n    fab: {\n        position: 'fixed',\n        right: theme.spacing(4),\n        bottom: theme.spacing(4),\n        zIndex: 999\n    }\n}))\n\nconst AddPostFab = () => {\n    const classes = useStyles()\n    const history = useHistory()\n\n    return (\n        <FloatingActionButton\n            className={classes.fab}\n            color='secondary'\n            onClick={() => history.push(routeMap.createPost.path)}\n        >\n            <AddIcon />\n        </FloatingActionButton>\n    )\n}\n\nexport default AddPostFab\n","import React from 'react'\n\nimport Skeleton, { SkeletonProps } from '@material-ui/lab/Skeleton'\nimport { IPostListSkeleton } from '../typings/PostListSkeleton'\nimport { List, ListItem, ListItemText } from '@material-ui/core'\n\nconst WaveSkeleton: React.FC<SkeletonProps> = (props) =>\n    <Skeleton animation='wave' {...props} />\n\nconst PostListSkeleton: IPostListSkeleton = ({\n    skeletons = 10,\n    itemClassName = '',\n    subheader\n}) => {\n    const renderSkeleton = (_: any, index: number) => {\n        return (\n            <ListItem key={index} className={itemClassName}>\n                <ListItemText\n                    primary={<WaveSkeleton />}\n                    secondary={\n                        <>\n                            <WaveSkeleton variant='rect' height={64} />\n                            <WaveSkeleton />\n                        </>\n                    }\n                />\n            </ListItem>\n        )\n    }\n\n    return (\n        <List>\n            {subheader}\n            {Array(skeletons).fill(null).map(renderSkeleton)}\n        </List>\n    )\n}\n\nexport default PostListSkeleton\n","import React from 'react'\n\nimport Grid from '@material-ui/core/Grid'\nimport Typography from '@material-ui/core/Typography'\nimport { blue } from '@material-ui/core/colors'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\n\nimport { routeMap } from '../../../routes'\nimport LinkTypography from '../../../components/LinkTypography'\n\n\nconst useStyles = makeStyles((theme) => createStyles({\n    link: {\n        ...theme.typography.subtitle1,\n        color: blue[900]\n    }\n}))\n\nconst NoPostsView = () => {\n    const classes = useStyles()\n\n    return (\n        <Grid container spacing={1} alignItems='center' justify='center'>\n            <Grid item>\n                <Typography align='center' color='textSecondary'>\n                    You don't have any posts.\n                </Typography>\n            </Grid>\n            <Grid item>\n                <LinkTypography\n                    to={routeMap.createPost.path}\n                    className={classes.link}\n                >\n                    Create Post\n                </LinkTypography>\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default NoPostsView\n","import React from 'react'\nimport { WrappedFieldProps, Field } from 'redux-form'\nimport {\n    RadioGroup,\n    Radio,\n    FormLabel,\n    FormControlLabel,\n    FormControl,\n    Grid\n} from '@material-ui/core'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\n\nimport { IPostFilterFormView } from '../../typings/PostFilterForm-View'\nimport TextFormField from '../../../../components/form-fields/TextFormField'\nimport SelectPostTags from '../../../../components/SelectPostTags'\n\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        [theme.breakpoints.up('sm')]: {\n            minWidth: `${theme.breakpoints.width('sm') - 50}px`,\n        },\n        '& > *': {\n            marginTop: theme.spacing(4)\n        },\n        '& > :last-child': {\n            marginBottom: theme.spacing(4)\n        }\n    }\n}))\n\nconst PostFilterFormView: IPostFilterFormView = ({\n    formId,\n    onFormSubmit\n}) => {\n    const classes = useStyles()\n\n    return (\n        <Grid\n            container\n            className={classes.root}\n            id={formId}\n            onSubmit={onFormSubmit}\n            component='form'\n            direction='column'\n        >\n            <Grid item>\n                <TextFormField\n                    name='query'\n                    label='Search Query'\n                    variant='outlined'\n                    autoFocus\n                    fullWidth\n                />\n            </Grid>\n\n            <Grid item>\n                <Field\n                    component={SortTypeComponent}\n                    name='sort'\n                />\n            </Grid>\n\n            <Grid item>\n                <Field\n                    component={SortOrderComponent}\n                    name='order'\n                />\n            </Grid>\n\n            <Grid item>\n                <SelectPostTags\n                    fieldLabel='Add Filter Tags'\n                    getOptionLabel={(value) => `Add tag \"${value}\"`}\n                />\n            </Grid>\n        </Grid>\n    )\n}\n\nconst SortTypeComponent: React.FC<WrappedFieldProps> = ({ input }) => {\n    return (\n        <FormControl component='fieldset'>\n            <FormLabel component='legend'>Sort By</FormLabel>\n            <RadioGroup {...input}>\n                <FormControlLabel value='title' label='Title' control={<Radio />} />\n                <FormControlLabel value='date' label='Date' control={<Radio />} />\n            </RadioGroup>\n        </FormControl>\n    )\n}\n\nconst SortOrderComponent: React.FC<WrappedFieldProps> = ({ input }) => {\n    return (\n        <FormControl component='fieldset'>\n            <FormLabel component='legend'>Sort Order</FormLabel>\n            <RadioGroup {...input}>\n                <FormControlLabel value='asc' label='Ascending' control={<Radio />} />\n                <FormControlLabel value='desc' label='Descending' control={<Radio />} />\n            </RadioGroup>\n        </FormControl>\n    )\n}\n\nexport default PostFilterFormView\n","import React from 'react'\nimport { reduxForm } from 'redux-form'\nimport { connect } from 'react-redux'\n\nimport PostFilterFormView from './PostFilterForm-View'\nimport {\n    IPostFilterFormConnector,\n    IPostFilterFormConnectorOwnProps,\n    IPostFilterFormData\n} from '../../typings/PostFilterForm-Connector'\nimport useFilter from '../../../../hooks/useFilter'\nimport { RootState } from '../../../../store'\nimport { selectFilterState } from '../../../../store/states/filter-state/filter-selectors'\n\nconst kFormId = 'post-filter-form'\n\nconst PostFilterFormConnector: IPostFilterFormConnector = ({ handleSubmit, afterSetFilter }) => {\n    // eslint-disable-next-line\n    const [_, { setFilter }] = useFilter()\n\n    const submitForm = (formValues: IPostFilterFormData) => {\n        const tags = (formValues.tags || []).map(tag => tag.value)\n\n        setFilter({ ...formValues, tags })\n        afterSetFilter()\n    }\n\n    return <PostFilterFormView formId={kFormId} onFormSubmit={handleSubmit(submitForm)} />\n}\n\nconst mapStateToProps = (state: RootState) => {\n    const filter = selectFilterState(state)\n    const tags = (filter.tags || []).map(value => ({\n        value,\n        label: `Add Tag: ${value}`\n    }))\n\n    return {\n        initialValues: { ...filter, tags }\n    }\n}\n\nconst WithForm = reduxForm<IPostFilterFormData, IPostFilterFormConnectorOwnProps>({\n    form: kFormId,\n})(PostFilterFormConnector)\n\nexport default connect(mapStateToProps)(WithForm)\n\n","import PostFilterForm from \"./PostFilterForm-Connector\";\n\nexport default PostFilterForm","import PostFilterDialog from \"./PostFilterDialog\";\n\nexport default PostFilterDialog","import React from 'react'\nimport {\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    DialogProps,\n    Button,\n    useMediaQuery,\n    Theme\n} from '@material-ui/core'\n\nimport { PostFilterForm } from './components'\nimport useFilter from '../../hooks/useFilter'\n\nconst PostFilterDialog: React.FC<DialogProps> = (props) => {\n    const fullScreen = useMediaQuery<Theme>((theme) => theme.breakpoints.down('sm'))\n    const { resetFilter } = useFilter()[1]\n\n    return (\n        <Dialog disableEscapeKeyDown fullScreen={fullScreen} {...props}>\n            <DialogTitle>Filter Posts</DialogTitle>\n            <DialogContent>\n                <PostFilterForm afterSetFilter={props.onClose as any} />\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={props.onClose as any}>\n                    Cancel\n                </Button>\n\n                <Button\n                    color='secondary'\n                    variant='outlined'\n                    onClick={resetFilter}\n                >\n                    Reset Filter\n                </Button>\n\n                <Button\n                    type='submit'\n                    form='post-filter-form'\n                    variant='contained'\n                    color='primary'\n                >\n                    Set Filter\n                </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\n\nexport default PostFilterDialog","import React from 'react'\n\nimport FilterIcon from '@material-ui/icons/FilterList'\nimport Button from '@material-ui/core/Button'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\nimport PostFilterDialog from '../../PostFilterDialog'\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        fontSize: 'inherit',\n        color: 'inherit'\n    }\n}))\n\nconst PostListFilter = () => {\n    const classes = useStyles()\n    const [dialogOpen, setDialogOpen] = React.useState(false)\n\n    return (\n        <>\n            <Button\n                className={classes.root}\n                startIcon={<FilterIcon />}\n                onClick={() => setDialogOpen(true)}\n            >\n                Filter\n            </Button>\n            <PostFilterDialog\n                open={dialogOpen}\n                onClose={() => setDialogOpen(false)}\n            />\n        </>\n    )\n}\n\nexport default PostListFilter\n","interface IPostListConstants {\n    itemThemeSpacingUnit: number\n}\n\nconst constants: IPostListConstants = { itemThemeSpacingUnit: 10 }\n\nexport default constants","import React from 'react'\nimport { Helmet } from 'react-helmet'\n\nimport Container from '@material-ui/core/Container'\nimport List from '@material-ui/core/List'\nimport ListSubheader from '@material-ui/core/ListSubheader'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\n\nimport PostListItem from './components/PostListItem'\nimport AddPostFab from './components/AddPostFab'\nimport PostListSkeleton from './components/PostList-Skeleton'\nimport NoPostsView from './components/NoPostsView'\nimport PostListFilter from './components/PostListFilter'\n\nimport PostModel from '../../store/models/PostModel'\nimport { IPostListView } from './typings/PostList-View'\nimport constants from './constants'\n\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        margin: `${theme.spacing(4)}px auto`\n    },\n    listSubheader: {\n        marginBottom: `-${theme.spacing(constants.itemThemeSpacingUnit / 1.5)}px`,\n        display: 'flex',\n        alignItems: 'baseline'\n    },\n    subheaderMainTitle: {\n        fontSize: 'inherit',\n        fontWeight: 'inherit',\n        flexGrow: 1\n    },\n    item: {\n        margin: `${theme.spacing(constants.itemThemeSpacingUnit)}px auto`\n    },\n}))\n\nconst PostListView: IPostListView = ({\n    posts,\n    highlightPost,\n    isLoading,\n    filter: { query: searchQuery, tags: filterTags },\n}) => {\n    const classes = useStyles()\n\n    const subheader = (\n        <ListSubheader disableSticky className={classes.listSubheader}>\n            <Typography className={classes.subheaderMainTitle}>\n                POSTS\n            </Typography>\n            <PostListFilter />\n        </ListSubheader>\n    )\n\n    const renderPosts = () => {\n        if (posts.length === 0 && typeof searchQuery === 'undefined') {\n            return <NoPostsView />\n        }\n\n        const filterDesc = []\n        if (!(searchQuery === \"\")) {\n            filterDesc.push(` query '${searchQuery}'`)\n        }\n        if (filterTags.length > 0) {\n            filterDesc.push(`${filterTags.length} selected tag(s)`)\n        }\n\n        const noMatchingPosts = (\n            <ListItem className={classes.item}>\n                <ListItemText primaryTypographyProps={{ align: 'center' }}>\n                    No posts matching the{' '}\n                    {filterDesc.join(' and ')}\n                </ListItemText>\n            </ListItem>\n        )\n\n        const postListBody = posts.map((post: PostModel) =>\n            <PostListItem\n                className={classes.item}\n                post={post}\n                key={post.id}\n                autoFocus={post.id === highlightPost}\n            />\n        )\n        return (\n            <List>\n                {subheader}\n                {\n                    posts.length === 0 ?\n                        noMatchingPosts :\n                        postListBody\n                }\n            </List>\n        )\n    }\n\n    return (\n        <>\n            <Helmet>\n                <title>Posts</title>\n            </Helmet>\n            <AddPostFab />\n            <Container maxWidth='md' className={classes.root}>\n                {\n                    isLoading ?\n                        <PostListSkeleton\n                            itemClassName={classes.item}\n                            subheader={subheader}\n                        /> :\n                        renderPosts()\n                }\n            </Container>\n        </>\n    )\n}\n\nexport default PostListView\n","import PostList from \"./PostList-Connector\";\n\nexport default PostList","import React from 'react'\nimport PostListView from './PostList-View'\nimport usePosts from '../../hooks/usePosts'\nimport useFilter from '../../hooks/useFilter'\n\nconst PostListConnector: React.FC<{ highlightPost?: string }> = ({ highlightPost }) => {\n    const [posts, { updateAllPosts }, { loading, error }] = usePosts({ autoFetch: true })\n    const [filter] = useFilter()\n\n    return (\n        <PostListView posts={posts}\n            onUpdatePosts={updateAllPosts}\n            highlightPost={highlightPost}\n            isLoading={loading}\n            error={error}\n            filter={filter}\n        />\n    )\n}\n\nexport default PostListConnector\n","import React from 'react'\nimport { Redirect, useLocation } from 'react-router-dom'\n\nimport useAccount from '../../hooks/useAccount'\nimport PostList from '../../features/PostList'\nimport { routeMap } from '../routes'\n\ninterface IHomePageHistoryState {\n    highlightPost?: string\n}\n\nconst HomePage = () => {\n    const [{ loggedIn }] = useAccount()\n    const { state } = useLocation<IHomePageHistoryState>()\n\n    const highlightPost = state ? state.highlightPost : undefined\n\n    if (loggedIn) {\n        return <PostList highlightPost={highlightPost} />\n    }\n\n    return <Redirect to={routeMap.login.path} />\n}\n\nexport default HomePage\n","import React from 'react'\nimport { InputAdornment, IconButton, TextFieldProps } from '@material-ui/core'\nimport VisibilityOn from '@material-ui/icons/Visibility'\nimport VisibilityOff from '@material-ui/icons/VisibilityOff'\n\nimport TextFormField from './TextFormField'\n\ntype IPasswordFieldProps = TextFieldProps & {\n    name: string\n    label: string\n}\n\nconst PasswordField: React.FC<IPasswordFieldProps> = ({\n    name,\n    label,\n    ...props\n}) => {\n    const [showPassword, setShowPassword] = React.useState(false)\n\n    const togglePasswordVisibility = () => setShowPassword(!showPassword)\n\n    return (\n        <TextFormField\n            type={showPassword ? 'text' : 'password'}\n            label={label}\n            name={name}\n            InputProps={{\n                endAdornment: (\n                    <InputAdornment position='end'>\n                        <IconButton\n                            onClick={togglePasswordVisibility}\n                        >\n                            {\n                                showPassword ?\n                                    <VisibilityOn /> :\n                                    <VisibilityOff />\n                            }\n                        </IconButton>\n                    </InputAdornment>\n                )\n            }}\n            {...props}\n        />\n    )\n}\n\nexport default PasswordField\n","import React from 'react'\nimport { Redirect, Link } from 'react-router-dom'\n\nimport Grid from '@material-ui/core/Grid'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\n\nimport { ILoginPageView } from './typings/LoginPage-View'\nimport TextFormField from '../../../components/form-fields/TextFormField'\nimport PasswordField from '../../../components/form-fields/PasswordField'\nimport LoadingButton from '../../../components/LoadingButton'\nimport { red } from '@material-ui/core/colors'\nimport { routeMap } from '../..'\nimport { Divider, useMediaQuery, Theme } from '@material-ui/core'\nimport Alert from '@material-ui/lab/Alert'\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        //height: '100%',\n        padding: theme.spacing(8)\n    },\n    fullHeight: {\n        height: '100%'\n    },\n    error: {\n        fontSize: '0.8rem',\n        color: red[900],\n        marginBottom: theme.spacing(1)\n    }\n}))\n\nconst LoginPageView: ILoginPageView = ({\n    loggedIn,\n    isLoggingIn,\n    formId,\n    onFormSubmit,\n    loginError,\n    loginResult\n}) => {\n    const classes = useStyles()\n\n    if (loginResult === 'success' || loggedIn) {\n        return <Redirect to={routeMap.home.path} />\n    }\n\n    return (\n        <div className={classes.root}>\n            <Grid\n                container\n                direction='column'\n                alignItems='center'\n                justify='center'\n                spacing={6}\n                className={classes.fullHeight}\n            >\n                <Grid item>\n                    <Typography variant='h4'>\n                        Login\n                    </Typography>\n                </Grid>\n\n                {loginError && <Grid item>\n                    <LoginError loginError={loginError} />\n                </Grid>\n                }\n\n                <Grid item>\n                    <form id={formId} onSubmit={onFormSubmit}>\n                        <Grid\n                            item\n                            container\n                            justify='center'\n                            alignContent='space-around'\n                            direction='column'\n                            spacing={4}\n                            className={classes.fullHeight}\n                        >\n                            <Grid item>\n                                <TextFormField name='username' label='Username' autoFocus />\n                            </Grid>\n                            <Grid item>\n                                <PasswordField name='password' label='Password' />\n                            </Grid>\n                        </Grid>\n                    </form>\n                </Grid>\n\n                <Grid item container justify='center'>\n                    <Grid item>\n                        <LoadingButton\n                            loading={isLoggingIn}\n                            variant='contained'\n                            color='primary'\n                            type='submit'\n                            form={formId}\n                        >\n                            Login\n                        </LoadingButton>\n                    </Grid>\n                </Grid>\n\n                <Grid item>\n                    <Divider variant='fullWidth' />\n                    <Button component={Link} to={routeMap.register.path}>\n                        Create account instead\n                    </Button>\n                </Grid>\n            </Grid>\n        </div>\n    )\n}\n\nconst LoginError: React.FC<{ loginError: any }> = ({ loginError }) => {\n    const isSmallScreen = useMediaQuery<Theme>((theme) => theme.breakpoints.down('sm'))\n    const isExtraSmallScreen = useMediaQuery<Theme>((theme) => theme.breakpoints.down('xs'))\n    const getMaxAlertWidth = () => {\n        // Make sure to check isExtraSmallScreen BEFORE isSmallScreen\n        // Since xs-down will also fulfill sm-down :)\n        if (isExtraSmallScreen) {\n            return '75vw'\n        }\n\n        if (isSmallScreen) {\n            return '40vw'\n        }\n\n        return '30vw'\n    }\n\n    if (!loginError) {\n        return null\n    }\n\n    if (loginError === 'device-not-trusted') {\n        return (\n            <Alert severity='error' style={{ maxWidth: getMaxAlertWidth() }}>\n                <Grid\n                    container\n                    direction='column'\n                >\n                    <Grid item>\n                        <Typography variant='h6'>\n                            This device/location is not trusted\n                        </Typography>\n                    </Grid>\n                    <Grid item>\n                        Please check your email for instructions to mark the device/location as trusted\n                    </Grid>\n                </Grid>\n            </Alert>\n        )\n    }\n\n    return <Alert severity='error'>{loginError}</Alert>\n}\n\nexport default LoginPageView","import React from 'react'\nimport { useSnackbar } from 'notistack'\n\nimport LoginPageView from './LoginPage-View'\nimport { ILoginPageContainer } from './typings/LoginPage-Container'\nimport { requestDeviceVerificationToken } from '../../../api/auth'\n\nconst LoginPageContainer: ILoginPageContainer = ({\n    loginResult,\n    loginError,\n    ...otherProps\n}) => {\n    const { enqueueSnackbar } = useSnackbar()\n    // If login fails, error snackbar is shown and then marked shown\n    // Next time the snackbar is not shown since it was marked shown\n    // Make sure to reset the flag on snackbar close/UI state changed (text field change, etc)\n    const [snackbarShown, setSnackbarShown] = React.useState(false)\n    if (loginResult && !snackbarShown) {\n        const onEnter = () => setSnackbarShown(true)\n\n        if (loginResult === 'success') {\n            enqueueSnackbar(\n                'Login Successful. You will be redirected shortly',\n                { variant: 'success', onEnter }\n            )\n        } else {\n            enqueueSnackbar('Login Failed', { variant: 'error', onEnter })\n        }\n    }\n\n    React.useEffect(() => {\n        if (loginError === 'device-not-trusted') {\n            requestDeviceVerificationToken()\n        }\n    }, [loginError])\n\n    return <LoginPageView loginResult={loginResult} loginError={loginError} {...otherProps} />\n}\n\nexport default LoginPageContainer","import LoginPage from \"./LoginPage-FormConnector\";\n\nexport default LoginPage","import React from 'react'\nimport { reduxForm } from 'redux-form'\n\nimport useAccount from '../../../hooks/useAccount'\nimport { loginAsync } from '../../../store/states/account-state/actions'\nimport unwrapAxiosThunkResult from '../../../utils/unwrap-axios-thunk-result'\n\nimport { ILoginPageFormConnector, ILoginPageFormConnectorOwnProps } from './typings/LoginPage-FormConnector'\nimport { ILoginResult } from './typings/LoginPage-View'\nimport LoginPageContainer from './LoginPage-Container'\n\nconst kFormId = 'login-form'\n\nconst LoginPageFormConnector: ILoginPageFormConnector = ({ handleSubmit }) => {\n    // eslint-disable-next-line\n    const [{ loggedIn }, { login }] = useAccount()\n    const [isLoggingIn, setLoggingIn] = React.useState(false)\n    const [loginError, setLoginError] = React.useState<string | undefined>(undefined)\n    const [loginResult, setLoginResult] = React.useState<ILoginResult>()\n\n    const performLogin = async (loginData: LoginData) => {\n        console.log('Perform Login: ', loginData)\n        setLoggingIn(true)\n\n        await login(loginData)\n            .then(unwrapAxiosThunkResult(loginAsync))\n            .then((_: any) => {\n                setLoginResult('success')\n            })\n            .catch((errResponse: SimplifiedAxiosResponse) => {\n                if (errResponse.status === 401) {\n                    setLoginError(errResponse.data.message)\n                } else {\n                    setLoginError('An unknown error occurred. Please try again later')\n                }\n\n                setLoginResult('failure')\n            })\n\n        setLoggingIn(false)\n    }\n\n    return (\n        <LoginPageContainer\n            loggedIn={loggedIn}\n            loginResult={loginResult}\n            loginError={loginError}\n            isLoggingIn={isLoggingIn}\n            formId={kFormId}\n            onFormSubmit={handleSubmit(performLogin)}\n        />\n    )\n}\n\nexport default reduxForm<LoginData, ILoginPageFormConnectorOwnProps>({\n    form: kFormId,\n    initialValues: {\n        username: 'John Doe',\n        password: 'password'\n    }\n})(LoginPageFormConnector)\n","import React from 'react'\n\nimport { Helmet } from 'react-helmet'\n\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\nimport Container from '@material-ui/core/Container'\n\nimport { ICreatePostView } from './typings/CreatePostPage-View'\nimport PostFormView from '../../../features/PostForm'\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        margin: `${theme.spacing(8)}px auto`\n    }\n}))\n\nconst CreatePostPageView: ICreatePostView = (props) => {\n    const classes = useStyles()\n\n    return (\n        <Container maxWidth='sm' className={classes.root}>\n            <Helmet>\n                <title>Create Post</title>\n            </Helmet>\n            <PostFormView {...props} formActionText='Create Post' header='Create Post' />\n        </Container>\n    )\n}\n\nexport default CreatePostPageView","import CreatePostPage from \"./CreatePostPage-FormConnector\";\n\nexport default CreatePostPage","import React from 'react'\nimport { reduxForm } from 'redux-form'\nimport { Redirect } from 'react-router-dom'\n\nimport {\n    ICreatePostFormConnector,\n    ICreatePostFormData,\n    ICreatePostFormConnectorOwnProps\n} from './typings'\nimport CreatePostPageView from './CreatePostPage-View'\n\nimport usePosts from '../../../hooks/usePosts'\nimport { routeMap } from '../../routes'\nimport unwrapAxiosError from '../../../utils/unwrap-axios-thunk-result'\nimport PostModel from '../../../store/models/PostModel'\nimport { createPostAsync } from '../../../store/states/posts-state/actions'\nimport useForm from '../../../hooks/useForm'\nimport { validator as createPostFormValidator } from '../../../features/PostForm'\n\nconst kFormId = 'create-post-form'\nconst kInitialValues: ICreatePostFormData = {\n    title: 'New Post'\n}\n\nconst CreatePostPageFormConnector: ICreatePostFormConnector = ({ handleSubmit, error }) => {\n    // eslint-disable-next-line\n    const [_, { createPost }] = usePosts()\n    const [formState, formActions] = useForm<PostModel,any>({\n        successSnackbarMessage: 'Your post was created successfully',\n        failureSnackbarMessage: 'Error creating post'\n    })\n\n    const submitForm = ({ tags, ...formValues }: ICreatePostFormData) => {\n        let stringTags: string[] | undefined\n        if (tags) {\n            stringTags = tags.map(tag => tag.value)\n        }\n\n        formActions.setFormSubmitting()\n        createPost({ ...formValues, tags: stringTags })\n            .then(unwrapAxiosError(createPostAsync))\n            // @ts-ignore\n            .then((createdPost: PostModel) => {\n                formActions.setFormSubmitSuccess(createdPost)\n            })\n            .catch((error: any) => {\n                formActions.setFormSubmitFail(error)\n            })\n    }\n\n    if (formState.status === 'submit-success') {\n        const createdPost = formState.meta\n        return <Redirect to={{\n            pathname: routeMap.home.path,\n            state: { highlightPost: createdPost && createdPost.id }\n        }} />\n    }\n\n    return (\n        <CreatePostPageView\n            formId={kFormId}\n            onFormSubmit={handleSubmit(submitForm)}\n            {...formState}\n        />\n    )\n}\n\nexport default reduxForm<ICreatePostFormData, ICreatePostFormConnectorOwnProps>({\n    form: kFormId,\n    initialValues: kInitialValues,\n    validate: createPostFormValidator\n})(CreatePostPageFormConnector)\n","import React from 'react'\nimport { Redirect, Link } from 'react-router-dom'\n\nimport Grid from '@material-ui/core/Grid'\nimport Typography from '@material-ui/core/Typography'\nimport Divider from '@material-ui/core/Divider'\nimport Button from '@material-ui/core/Button'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\nimport { red } from '@material-ui/core/colors'\n\nimport TextFormField from '../../../components/form-fields/TextFormField'\nimport PasswordField from '../../../components/form-fields/PasswordField'\nimport { routeMap } from '../../'\nimport { IRegisterPageView } from './typings'\nimport FormSubmitButton from '../../../components/FormSubmitButton'\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        //height: '100%',\n        padding: theme.spacing(8)\n    },\n    fullHeight: {\n        height: '100%'\n    },\n    error: {\n        fontSize: '0.8rem',\n        color: red[900],\n        marginBottom: theme.spacing(1)\n    }\n}))\n\nconst RegisterPageView: IRegisterPageView = ({\n    loggedIn,\n    formId,\n    onFormSubmit,\n    status,\n    error: registerError\n}) => {\n    const classes = useStyles()\n\n    if (status === 'submit-success' || loggedIn) {\n        return <Redirect to={routeMap.home.path} />\n    }\n\n    return (\n        <div className={classes.root}>\n            <Grid\n                container\n                direction='column'\n                alignItems='center'\n                justify='center'\n                spacing={6}\n                className={classes.fullHeight}\n            >\n                <Grid item>\n                    <Typography variant='h4'>\n                        Create Account\n                    </Typography>\n                </Grid>\n\n                <Grid item>\n                    {registerError &&\n                        <Typography className={classes.error}>\n                            *{registerError}\n                        </Typography>\n                    }\n                    <form id={formId} onSubmit={onFormSubmit}>\n                        <Grid\n                            item\n                            container\n                            justify='center'\n                            alignContent='space-around'\n                            direction='column'\n                            spacing={4}\n                            className={classes.fullHeight}\n                        >\n                            <Grid item>\n                                <TextFormField name='email' label='Email' type='email' autoFocus />\n                            </Grid>\n                            <Grid item>\n                                <TextFormField name='username' label='Username' />\n                            </Grid>\n                            <Grid item>\n                                <PasswordField name='password' label='Password' />\n                            </Grid>\n                        </Grid>\n                    </form>\n                </Grid>\n\n                <Grid item container justify='center'>\n                    <FormSubmitButton\n                        formState={status}\n                        formId={formId}\n                        variant='contained'\n                        color='primary'\n                    >\n                        Register\n                    </FormSubmitButton>\n                </Grid>\n\n                <Grid item>\n                    <Divider />\n                    <Button component={Link} to={routeMap.login.path}>\n                        Login instead\n                    </Button>\n                </Grid>\n            </Grid>\n        </div>\n    )\n}\n\nexport default RegisterPageView\n","import validator from \"validator\"\n\nconst validate = ({ username, email, password }: Partial<RegisterData>) => {\n    const errors: { [P in keyof Partial<RegisterData>]: string } = {}\n\n    const ensureNotEmpty = (name: keyof RegisterData, value?: string) => {\n        if (!value || validator.isEmpty(value)) {\n            errors[name] = `${name} cannot be empty`\n        }\n    }\n\n    ensureNotEmpty('username', username)\n    ensureNotEmpty('password', password)\n    ensureNotEmpty('email', email)\n\n    if (email && !errors.email && !validator.isEmail(email)) {\n        errors.email = 'must be a valid email'\n    }\n\n    return errors\n}\n\nexport default validate","import RegisterPage from './RegisterPage-Connector';\n\nexport default RegisterPage","import React from 'react'\nimport { reduxForm } from 'redux-form'\nimport { AxiosResponse } from 'axios'\n\nimport useForm from '../../../hooks/useForm'\nimport RegisterPageView from './RegisterPage-View'\nimport useAccount from '../../../hooks/useAccount'\nimport { IRegisterPageConnector, IRegisterPageConnectorOwnProps } from './typings/RegisterPage-Connector'\nimport unwrapAxiosError from '../../../utils/unwrap-axios-thunk-result'\nimport { createAccountAsync } from '../../../store/states/account-state/actions'\nimport validate from './validator'\n\nconst kFormId = 'user-register-form'\n\nconst RegisterPageConnector: IRegisterPageConnector = ({ handleSubmit }) => {\n    const [formState, actions] = useForm<void, any>({\n        successSnackbarMessage: 'User registration completed',\n        failureSnackbarMessage: 'Error registering user. Try again'\n    })\n    const [{ loggedIn }, { createAccount }] = useAccount({ autoFetch: true })\n\n    const submitForm = (formData: RegisterData) => {\n        actions.setFormSubmitting()\n\n        createAccount(formData)\n            .then(unwrapAxiosError(createAccountAsync))\n            .then(actions.setFormSubmitSuccess)\n            .catch(({ status, data }: AxiosResponse) => {\n                const unknownError = 'An unknown error occurred while trying to create the account'\n                if (status === 401) {\n                    actions.setFormSubmitFail(data ? data.message : unknownError)\n                } else {\n                    actions.setFormSubmitFail(unknownError)\n                }\n            })\n    }\n\n    return (\n        <RegisterPageView\n            loggedIn={loggedIn}\n            formId={kFormId}\n            onFormSubmit={handleSubmit(submitForm)}\n            {...formState}\n        />\n    )\n}\n\nexport default reduxForm<RegisterData, IRegisterPageConnectorOwnProps>({\n    form: kFormId,\n    validate\n})(RegisterPageConnector)\n","import React from 'react'\nimport {\n    Dialog,\n    DialogProps,\n    DialogContent,\n    DialogContentText,\n    CircularProgress,\n    Grid\n} from '@material-ui/core'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => createStyles({\n    dialogContent: {\n        height: '100%',\n        '& > *': {\n            margin: theme.spacing(2)\n        }\n    }\n}))\n\nconst LoadingDialog: React.FC<DialogProps & { loadingText?: string }> = ({\n    loadingText,\n    ...props\n}) => {\n    const classes = useStyles()\n    return (\n        <Dialog fullScreen disableEscapeKeyDown disableBackdropClick {...props}>\n            <DialogContent>\n                <Grid\n                    container\n                    direction='column'\n                    justify='center'\n                    alignItems='center'\n                    className={classes.dialogContent}\n                >\n                    <CircularProgress />\n                    <DialogContentText variant='h4'>{loadingText || 'Loading'}</DialogContentText>\n                </Grid>\n            </DialogContent>\n        </Dialog>\n    )\n}\n\nexport default LoadingDialog\n","import React from 'react'\n\nimport { Helmet } from 'react-helmet'\n\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\nimport Container from '@material-ui/core/Container'\n\nimport { ICreatePostView } from './typings/EditPostPage-View'\nimport PostFormView from '../../../features/PostForm'\nimport LoadingDialog from '../../../features/LoadingDialog'\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        margin: `${theme.spacing(8)}px auto`\n    }\n}))\n\nconst EditPostPageView: ICreatePostView = ({ postFetchStatus: { status }, ...props }) => {\n    const classes = useStyles()\n\n    const postNotReady = status === 'uninitiated' || status === 'loading'\n\n    if (status === 'fail') {\n        return <div>ERROR</div>\n    }\n\n    return (\n        <>\n            <Container maxWidth='sm' className={classes.root}>\n                <Helmet>\n                    <title>Edit Post</title>\n                </Helmet>\n                <PostFormView {...props} formActionText='Confirm Edit' header='Edit Post' />\n            </Container>\n            <LoadingDialog open={postNotReady} loadingText='Loading Post' />\n        </>\n    )\n}\n\nexport default EditPostPageView","import React from 'react'\nimport { reduxForm } from 'redux-form'\nimport { Redirect } from 'react-router-dom'\n\nimport { IPostFormConnector, IPostFormConnectorOwnProps } from './typings'\nimport EditPostPageView from './EditPostPage-View'\n\nimport usePosts from '../../../hooks/usePosts'\nimport { routeMap } from '../../routes'\nimport unwrapAxiosError from '../../../utils/unwrap-axios-thunk-result'\nimport PostModel from '../../../store/models/PostModel'\nimport { editPostAsync } from '../../../store/states/posts-state/actions'\nimport useForm from '../../../hooks/useForm'\nimport { validator as editPostFormValidator, IPostFormData } from '../../../features/PostForm'\n\nconst kFormId = 'edit-post-form'\n\nconst EditPostPageFormConnector: IPostFormConnector = ({\n    handleSubmit,\n    postId,\n    postFetchStatus\n}) => {\n    // eslint-disable-next-line\n    const [_, { editPost }] = usePosts()\n    const [formState, formActions] = useForm<PostModel, any>({\n        successSnackbarMessage: 'Post edit successful',\n        failureSnackbarMessage: 'Error editing post'\n    })\n\n    const submitForm = ({ tags, ...formValues }: IPostFormData) => {\n        let stringTags: string[] | undefined\n        if (tags) {\n            stringTags = tags.map(tag => tag.value)\n        }\n\n        formActions.setFormSubmitting()\n        editPost({ ...formValues, id: postId, tags: stringTags })\n            .then(unwrapAxiosError(editPostAsync))\n            // @ts-ignore\n            .then((editedPost: PostModel) => {\n                console.log({ editedPost })\n                formActions.setFormSubmitSuccess(editedPost)\n            })\n            .catch((error: any) => {\n                formActions.setFormSubmitFail(error)\n            })\n    }\n\n    if (formState.status === 'submit-success') {\n        const editedPost = formState.meta\n        return <Redirect to={{\n            pathname: routeMap.home.path,\n            state: { highlightPost: editedPost && editedPost.id }\n        }} />\n    }\n\n    return (\n        <EditPostPageView\n            formId={kFormId}\n            onFormSubmit={handleSubmit(submitForm)}\n            postFetchStatus={postFetchStatus}\n            {...formState}\n        />\n    )\n}\n\nexport default reduxForm<IPostFormData, IPostFormConnectorOwnProps>({\n    form: kFormId,\n    validate: editPostFormValidator\n})(EditPostPageFormConnector)\n","import { useState } from \"react\"\n\nexport interface IAsyncState<Meta, Error> {\n    status: GenericAsyncState\n    meta?: Meta\n    error?: Error\n}\n\nexport interface IAsyncStateActions<Meta, Error> {\n    setUninitiated: VoidCallback\n    setLoading: VoidCallback\n    setSuccess: ValueCallback<Meta>\n    setFailure: ValueCallback<Error>\n}\n\ntype IUseAsyncStateHook<M, E> = Hook<IAsyncState<M, E>, IAsyncStateActions<M, E>>\n\nconst useAsyncState = <M = void, E = any>(): IUseAsyncStateHook<M, E> => {\n    const [state, setState] = useState<IAsyncState<M, E>>({ status: 'uninitiated' })\n\n    return [\n        state, {\n            setUninitiated: () => setState({status: 'uninitiated', error: undefined, meta: undefined}),\n            setLoading: () => setState({ status: 'loading', error: undefined, meta: undefined }),\n            setSuccess: (meta) => setState({ status: 'success', meta, error: undefined }),\n            setFailure: (error) => setState({ status: 'fail', error, meta: undefined })\n        }\n    ]\n}\n\nexport default useAsyncState","import EditPostPage from \"./EditPostPage-DataConnector\";\n\nexport default EditPostPage","import React from 'react'\nimport { useParams } from 'react-router-dom'\n\nimport EditPostPageFormConnector from './EditPostPage-FormConnector'\nimport { getPostById } from '../../../api/posts'\nimport useAsyncState from '../../../hooks/useAsyncState'\nimport PostModel from '../../../store/models/PostModel'\n\ninterface IEditPostPageParams {\n    postId: string\n}\n\nconst EditPostPageStoreConnector = () => {\n    const [fetchState, { setSuccess, setFailure, setLoading }] = useAsyncState<PostModel | undefined>()\n    const { postId } = useParams<IEditPostPageParams>()\n\n    React.useEffect(() => {\n        async function fetchPost() {\n            setLoading()\n            await getPostById(postId)\n                .then((post) => setSuccess(post ? post : undefined))\n                .catch(setFailure)\n        }\n\n        if (fetchState.status === 'uninitiated') {\n            fetchPost()\n        }\n\n    }, [postId, fetchState, setLoading, setFailure, setSuccess])\n\n\n    const getInitialValues = () => {\n        const post = fetchState.meta\n        if (post) {\n            return {\n                ...post,\n                tags: post.tags.map(value => ({\n                    label: `Create Tag: \"${value}\"`,\n                    value\n                }))\n            }\n        }\n    }\n\n    return (\n        <EditPostPageFormConnector\n            postId={postId}\n            initialValues={getInitialValues()}\n            postFetchStatus={fetchState}\n        />\n    )\n}\n\nexport default EditPostPageStoreConnector\n","import React from 'react'\nimport { ISettingCard, ISettingCardInfo, ISettingCardAction } from '../typings'\nimport { Grid, Typography, Paper, useMediaQuery, Theme } from '@material-ui/core'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\nimport { fade, lighten } from '@material-ui/core/styles/colorManipulator'\nimport clsx from 'clsx'\n\nconst useStyles = makeStyles((theme) => {\n    const getActionBg = () => {\n        // Lightening will not suit for dark theme hence we are fading the color to suit dark theme\n        if (theme.palette.type === 'dark') {\n            return fade(theme.palette.primary.light, 0.05)\n        }\n\n        return lighten(theme.palette.primary.light, 0.6)\n    }\n\n    return createStyles({\n        item: {\n            padding: theme.spacing(4),\n            [theme.breakpoints.down('xs')]: {\n                padding: theme.spacing(2)\n            }\n        },\n        action: {\n            backgroundColor: getActionBg()\n        },\n        subtitle: {\n            paddingTop: theme.spacing(1),\n            paddingBottom: theme.spacing(1)\n        }\n    })\n})\n\nexport const SettingCard: ISettingCard = ({\n    action,\n    ...infoProps\n}) => {\n    const classes = useStyles()\n\n    return (\n        <Paper elevation={2}>\n            <Grid container>\n                <SettingCardInfo {...infoProps} className={classes.item} />\n                <SettingCardAction action={action} className={clsx(classes.item, classes.action)} />\n            </Grid>\n        </Paper>\n    )\n}\n\nconst SettingCardInfo: ISettingCardInfo = ({\n    title,\n    subtitle,\n    extra,\n    className\n}) => {\n    const classes = useStyles()\n    const isMobile = useMediaQuery<Theme>((theme) => theme.breakpoints.down('sm'))\n    const titleVariant = isMobile ? 'h5' : 'h4'\n\n    return (\n        <Grid item container direction='column' wrap='nowrap' sm={7} className={className}>\n            <Grid item>\n                <Typography variant={titleVariant}>\n                    {title}\n                </Typography>\n            </Grid>\n            <Grid item>\n                <Typography variant='subtitle2' className={classes.subtitle}>\n                    {subtitle}\n                </Typography>\n            </Grid>\n            <Grid item>\n                {extra}\n            </Grid>\n        </Grid>\n    )\n}\n\nconst SettingCardAction: ISettingCardAction = ({ action, className }) => {\n    return (\n        <Grid\n            sm\n            item\n            container\n            alignItems='center'\n            justify='center'\n            className={className}\n        >\n            <Grid item>\n                {action}\n            </Grid>\n        </Grid>\n    )\n}","import useAsyncState, { IAsyncState, IAsyncStateActions } from \"./useAsyncState\"\nimport unwrapAxiosError from \"../utils/unwrap-axios-thunk-result\"\n\ntype Callback<T> = VoidCallback | ValueCallback<T>\n\ninterface IUseAsyncActionOperations<T> {\n    performAction: Callback<T>\n    asyncActions: IAsyncStateActions<T, any>\n}\n\ninterface IUseAsyncActionOpts<T> {\n    action: any\n}\n\ntype IUseAsyncActionHook<T> = Hook<IAsyncState<T, any>, IUseAsyncActionOperations<T>>\n\nconst useAsyncAction = <T = void>({ action }: IUseAsyncActionOpts<T>): IUseAsyncActionHook<T> => {\n    const [actionState, asyncActions] = useAsyncState<T, any>()\n\n    const performAction: Callback<T> = (arg) => {\n        asyncActions.setLoading()\n        action(arg)\n            .then(unwrapAxiosError(action))\n            .then((res: any) => asyncActions.setSuccess(res))\n            .catch((err: any) => asyncActions.setFailure(err))\n    }\n\n    return [actionState, { asyncActions, performAction }]\n}\n\nexport default useAsyncAction","import React from 'react'\nimport Typography from '@material-ui/core/Typography'\n\nimport { SettingCard } from './SettingCard'\nimport { IAccountMultifactor } from '../typings'\nimport useAccount from '../../../../hooks/useAccount'\nimport LoadingButton from '../../../../components/LoadingButton'\nimport useAsyncAction from '../../../../hooks/useAsyncAction'\n\nexport const AccountMultifactor: IAccountMultifactor = (props) => {\n    const Subtitle = (\n        <Typography variant='subtitle2' color='textSecondary'>\n            {props.multifactorAuthEnabled ? 'Enabled' : 'Disabled'}\n        </Typography>\n    )\n\n    return (\n        <SettingCard\n            title='Two Factor Authentication'\n            subtitle={Subtitle}\n            action={<AccountMultifactorAction />}\n            extra={<AccountMultifactorMeta {...props} />}\n        />\n    )\n}\n\nconst AccountMultifactorMeta: IAccountMultifactor = ({ multifactorAuthEnabled }) => {\n    if (multifactorAuthEnabled) {\n        return (\n            <>\n                Your account is secured using Two Factor Authentication.\n                Any attempt to login through an unknown device and/or IP address will require additional confirmation through email\n            </>\n        )\n    }\n\n    return (\n        <>\n            Enabling Two Factor authentication will provide additional security\n            to your account\n        </>\n    )\n}\n\nconst AccountMultifactorAction = () => {\n    const [{ multifactorAuthEnabled }, { multifactor }] = useAccount()\n\n    const getBtnContent = () => {\n        if (multifactorAuthEnabled) {\n            return {\n                text: 'Disable Two Factor Auth',\n                onClick: multifactor.disableMultifactor\n            }\n        }\n\n        return {\n            text: 'Enable Two Factor Auth',\n            onClick: multifactor.enableMultifactor\n        }\n    }\n\n    const { text, onClick } = getBtnContent()\n    const [actionState, { performAction }] = useAsyncAction({ action: onClick })\n\n    return (\n        <LoadingButton\n            loading={actionState.status === 'loading'}\n            variant='contained'\n            color='primary'\n            onClick={() => performAction()}\n        >\n            {text}\n        </LoadingButton>\n    )\n}","import React from 'react'\nimport { ButtonProps, Button } from '@material-ui/core'\nimport EditAccountDialog from '../../../../features/EditAccountDialog'\n\ntype IAccountActionButtonProps = ButtonProps & {\n    toEdit: 'username' | 'email'\n}\n\nconst AccountActionButton: React.FC<IAccountActionButtonProps> = ({ toEdit, ...props }) => {\n    const [dialogOpen, setDialogOpen] = React.useState(false)\n\n    return (\n        <>\n            <Button\n                variant='contained'\n                color='primary'\n                onClick={() => setDialogOpen(true)}\n                {...props}\n            />\n            <EditAccountDialog toEdit={toEdit} open={dialogOpen} onClose={() => setDialogOpen(false)} />\n        </>\n    )\n}\n\nexport default AccountActionButton\n","import React from 'react'\nimport { IAccountEmail } from '../typings'\n\nimport Typography from '@material-ui/core/Typography'\nimport Alert from '@material-ui/lab/Alert'\nimport { SettingCard } from './SettingCard'\nimport LoadingButton from '../../../../components/LoadingButton'\nimport { requestEmailVerification } from '../../../../api/auth'\nimport useAsyncAction from '../../../../hooks/useAsyncAction'\nimport AccountActionButton from './AccountActionButton'\n\nexport const AccountEmail: IAccountEmail = (props) => {\n    return (\n        <SettingCard\n            title='Email'\n            subtitle={<AccountEmailMeta {...props} />}\n            action={<AccountActionButton toEdit='email'>Change Email Address</AccountActionButton>}\n            extra={!props.emailVerified && <AccountEmailVerificationAlert />}\n        />\n    )\n}\n\nconst AccountEmailMeta: IAccountEmail = ({ email, emailVerified }) => {\n    return (\n        <>\n            {email}\n            <Typography component='span' variant='subtitle2' color='textSecondary'>\n                {' '}({emailVerified ? '' : 'not '}verified)\n            </Typography>\n        </>\n    )\n}\n\nconst AccountEmailVerificationAlert = () => {\n    const [{ status }, { performAction }] = useAsyncAction({ action: requestEmailVerification })\n\n    return (\n        <Alert\n            severity='info'\n            action={\n                <LoadingButton loading={status === 'loading'} onClick={() => performAction()}>\n                    Send verification email\n                </LoadingButton>\n            }\n        >\n            Your email address is not verified\n        </Alert>\n    )\n}","import React from 'react'\nimport { IAccountUsername } from '../typings'\n\nimport { SettingCard } from './SettingCard'\nimport AccountActionButton from './AccountActionButton'\n\nexport const AccountUsername: IAccountUsername = ({ username }) => {\n    return (\n        <SettingCard\n            title='Username'\n            subtitle={username}\n            action={<AccountActionButton toEdit='username'>Change Username</AccountActionButton>}\n        />\n    )\n}","import React from 'react'\nimport Button from '@material-ui/core/Button'\n\nimport { SettingCard } from './SettingCard'\nimport { IAccountPassword } from '../typings/AccountPassword'\nimport { Link } from 'react-router-dom'\nimport { routeMap } from '../../../routes'\n\nexport const AccountPassword: IAccountPassword = ({ emailVerified }) => {\n    return (\n        <SettingCard\n            title='Password'\n            subtitle={emailVerified ? '' : 'Verify your email to reset password'}\n            action={\n                <Button\n                    variant='contained'\n                    color='primary'\n                    disabled={!emailVerified}\n                    component={Link}\n                    to={routeMap.initiatePasswordReset.path}\n                >\n                    Reset Password\n                </Button>\n            }\n        />\n    )\n}","import React from 'react'\nimport Container from '@material-ui/core/Container'\nimport Grid from '@material-ui/core/Grid'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\n\nimport useAccount from '../../../hooks/useAccount'\nimport LoadingDialog from '../../../features/LoadingDialog'\nimport { Redirect } from 'react-router-dom'\nimport { routeMap } from '../../routes'\nimport {\n    AccountEmail,\n    AccountMultifactor,\n    AccountUsername,\n    AccountPassword\n} from './components'\n\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        height: '100%',\n        marginTop: theme.spacing(8),\n        marginBottom: theme.spacing(8)\n    }\n}))\n\nconst AccountPage = () => {\n    // eslint-disable-next-line\n    const [{ loggedIn, user, emailVerified, multifactorAuthEnabled }, _, status] = useAccount({ autoFetch: true })\n    const classes = useStyles()\n\n    if (status.loading || status.uninitiated) {\n        return <LoadingDialog open={true} />\n    }\n\n    if (!loggedIn || !user) {\n        return <Redirect to={routeMap.login.path} />\n    }\n\n    return (\n        <Container maxWidth='md' className={classes.root}>\n            <Grid\n                container\n                direction='column'\n                justify='space-evenly'\n                wrap='nowrap'\n                spacing={4}\n            >\n                <Grid item>\n                    <AccountUsername username={user.username} />\n                </Grid>\n\n                <Grid item>\n                    <AccountEmail email={user.email} emailVerified={Boolean(emailVerified)} />\n                </Grid>\n\n                <Grid item>\n                    <AccountMultifactor multifactorAuthEnabled={Boolean(multifactorAuthEnabled)} />\n                </Grid>\n\n                <Grid item>\n                    <AccountPassword emailVerified={Boolean(emailVerified)} />\n                </Grid>\n            </Grid>\n        </Container>\n    )\n}\n\nexport default AccountPage\n","import AccountPage from \"./AccountPage\";\n\nexport default AccountPage","import React from 'react'\nimport LinkTypography, { ILinkTypographyProps } from \"./LinkTypography\"\n\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\nconst useStyles = makeStyles(() => createStyles({\n    link: {\n        textDecoration: 'underline'\n    }\n}))\n\nconst UnderlinedLink: React.FC<ILinkTypographyProps> = ({ className, ...props }) => {\n    const classes = useStyles()\n\n    return (\n        <LinkTypography color='inherit' className={classes.link} {...props} />\n    )\n}\n\nexport default UnderlinedLink","import React from 'react'\nimport { Typography, Grid, Container } from '@material-ui/core'\n\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\nconst useStyles = makeStyles(() => createStyles({\n    root: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center'\n    }\n}))\n\nconst InfoContainer: React.FC<{\n    title: React.ReactNode,\n    subtitle: React.ReactNode\n}> = ({ title, subtitle }) => {\n    const classes = useStyles()\n    return (\n        <Container maxWidth='sm' className={classes.root}>\n            <Grid container spacing={8} direction='column' justify='center' alignItems='center'>\n                <Typography variant='h5'>\n                    {title}\n                </Typography>\n                <Typography variant='subtitle2' color='textSecondary'>\n                    {subtitle}\n                </Typography>\n            </Grid>\n        </Container>\n    )\n}\n\nexport default InfoContainer","import React from 'react'\nimport LoadingDialog from '../features/LoadingDialog'\n\ninterface IAsyncContainerProps {\n    asyncStatus: GenericAsyncState\n    loadingText?: string\n    successContent: any\n    errorContent: any\n}\n\nconst AsyncContainer: React.FC<IAsyncContainerProps> = ({ asyncStatus, loadingText, ...contents }) => {\n    if (asyncStatus === 'loading' || asyncStatus === 'uninitiated') {\n        return <LoadingDialog open={true} loadingText={loadingText} />\n    }\n\n    if (asyncStatus === 'fail') {\n        return contents.errorContent\n    }\n\n    return contents.successContent\n}\n\nexport default AsyncContainer\n","import EmailVerification from './EmailVerification';\n\nexport default EmailVerification","import React from 'react'\nimport { useParams } from 'react-router-dom'\n\nimport useAsyncAction from '../../../hooks/useAsyncAction'\nimport { checkEmailVerificationToken } from '../../../api/auth'\nimport { routeMap } from '../../routes'\nimport UnderlinedLink from '../../../components/UnderlinedLink'\nimport InfoContainer from '../../../components/InfoContainer'\nimport AsyncContainer from '../../../components/AsyncContainer'\n\n\ninterface IEmailVerificationUrlParams {\n    token: string\n}\n\nconst EmailVerification = () => {\n    const { token } = useParams<IEmailVerificationUrlParams>()\n    const [\n        { status: tokenCheckStatus },\n        { performAction: verifyToken }\n    ] = useAsyncAction<string>({ action: checkEmailVerificationToken })\n\n    React.useEffect(() => {\n        if (tokenCheckStatus === 'uninitiated') {\n            console.log(\"Will verify\")\n            verifyToken(token)\n        }\n    }, [tokenCheckStatus, verifyToken, token])\n\n    return <AsyncContainer\n        asyncStatus={tokenCheckStatus}\n        loadingText='Verifying Token'\n        successContent={\n            <InfoContainer\n                title='Thank you for verifying your email address!'\n                subtitle={\n                    <UnderlinedLink to={routeMap.home.path}>\n                        Go to home page\n                    </UnderlinedLink>\n                }\n            />\n        }\n        errorContent={\n            <InfoContainer\n                title='This link is either invalid or has already expired'\n                subtitle={\n                    <>\n                        Please visit{' '}\n                        <UnderlinedLink to={routeMap.account.path}>\n                            Account Page\n                        </UnderlinedLink>\n                        {' '}to generate a new link to verify your email address\n                    </>\n                }\n            />\n        }\n    />\n}\n\nexport default EmailVerification\n","import React from 'react'\nimport { Grid, Typography } from '@material-ui/core'\nimport PasswordField from '../../../../../components/form-fields/PasswordField'\nimport { IPasswordResetFormView } from '../../typings/PasswordResetForm-View'\n\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\nimport FormSubmitButton from '../../../../../components/FormSubmitButton'\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        marginTop: theme.spacing(2),\n        marginBottom: theme.spacing(8)\n    },\n}))\n\nconst PasswordResetFormView: IPasswordResetFormView = ({ formState: { status }, formId, onFormSubmit }) => {\n    const classes = useStyles()\n    return (\n        <>\n            <Typography variant='h5'>Reset your password:</Typography>\n            <Grid\n                container\n                direction='column'\n                component='form'\n                spacing={4}\n                className={classes.root}\n                id={formId}\n                onSubmit={onFormSubmit}\n            >\n                <Grid item>\n                    <PasswordField name='password' label='Enter Password' variant='outlined' />\n                </Grid>\n                <Grid item>\n                    <PasswordField name='confirmPassword' label='Confirm Password' variant='outlined' />\n                </Grid>\n                <Grid item>\n                    <FormSubmitButton\n                        fullWidth\n                        formState={status}\n                        formId={formId}\n                        color='primary'\n                        variant='contained'\n                    >\n                        Reset Password\n                    </FormSubmitButton>\n                </Grid>\n            </Grid>\n        </>\n    )\n}\n\nexport default PasswordResetFormView\n","import { IPasswordResetFormData } from \"../../typings/PasswordResetFormData\";\nimport validator from \"validator\";\n\nconst passwordResetFormValidator = ({ password, confirmPassword }: IPasswordResetFormData) => {\n    const errors: Partial<IPasswordResetFormData> = {}\n\n    if (!password) {\n        errors.password = 'Password is required'\n    }\n\n    if (!confirmPassword) {\n        errors.confirmPassword = 'Confirm Password is required'\n    }\n\n    if ((password && confirmPassword) && !validator.equals(password, confirmPassword)) {\n        errors.confirmPassword = 'Must match the password'\n    }\n\n    return errors\n}\n\nexport default passwordResetFormValidator","import PasswordResetForm from \"./PasswordResetForm-Connector\";\n\nexport default PasswordResetForm","import React from 'react'\nimport { IPasswordResetFormData } from '../../typings/PasswordResetFormData'\nimport useAccount from '../../../../../hooks/useAccount'\nimport { IPasswordResetFormConnector, IPasswordResetFormConnectorOwnProps } from '../../typings/PasswordResetForm-Connector'\nimport PasswordResetFormView from './PasswordResetForm-View'\nimport { reduxForm } from 'redux-form'\nimport passwordResetFormValidator from './validator'\nimport unwrapAxiosError from '../../../../../utils/unwrap-axios-thunk-result'\nimport { resetPasswordAsync } from '../../../../../store/states/account-state/actions'\n\nconst formId = 'password-reset-form'\n\nconst PasswordResetFormConnector: IPasswordResetFormConnector = ({\n    passwordResetToken,\n    formState,\n    formActions: actions,\n    handleSubmit\n}) => {\n    const { resetPassword } = useAccount()[1]\n    const requestResetPassword = ({ password }: IPasswordResetFormData) => {\n        actions.setFormSubmitting()\n        resetPassword({ passwordResetToken, password })\n            .then(unwrapAxiosError(resetPasswordAsync))\n            .then((_: any) => actions.setFormSubmitSuccess())\n            .catch((err: any) => {\n                console.log('Reset error: ', { err })\n                actions.setFormSubmitFail(err)\n            })\n    }\n\n    return (\n        <PasswordResetFormView\n            formState={formState}\n            formId={formId}\n            onFormSubmit={handleSubmit(requestResetPassword)}\n        />\n    )\n}\n\nexport default reduxForm<IPasswordResetFormData, IPasswordResetFormConnectorOwnProps>({\n    form: formId,\n    validate: passwordResetFormValidator\n})(PasswordResetFormConnector)\n","import HomePage from \"./pages/HomePage\"\nimport LoginPage from \"./pages/LoginPage\"\nimport CreatePostPageForm from \"./pages/CreatePostPage\"\nimport RegisterPage from \"./pages/RegisterPage\"\nimport EditPostPage from './pages/EditPostPage'\nimport AccountPage from \"./pages/AccountPage\"\nimport EmailVerification from \"./pages/EmailVerification\"\nimport PasswordReset from \"./pages/PasswordReset\"\nimport InitiatePasswordReset from \"./pages/InitiatePasswordReset\"\nimport DeviceVerification from \"./pages/DeviceVerification\"\n\ninterface IRouteMap {\n    home: IRoute\n    login: IRoute\n    register: IRoute\n    createPost: IRoute\n    editPost: IRoute\n    account: IRoute\n    verifyEmail: IRoute\n    initiatePasswordReset: IRoute\n    passwordReset: IRoute\n    deviceVerification: IRoute\n}\n\ninterface IRoute {\n    path: string\n    component: React.ComponentType\n    exact: boolean\n}\n\nexport const routeMap: IRouteMap = {\n    home: {\n        path: '/',\n        component: HomePage,\n        exact: true\n    },\n    login: {\n        path: '/login',\n        component: LoginPage,\n        exact: true\n    },\n    register: {\n        path: '/register',\n        component: RegisterPage,\n        exact: true\n    },\n    createPost: {\n        path: '/posts/new',\n        component: CreatePostPageForm,\n        exact: true\n    },\n    editPost: {\n        path: '/posts/:postId/edit',\n        component: EditPostPage,\n        exact: true\n    },\n    account: {\n        path: '/account',\n        component: AccountPage,\n        exact: true\n    },\n    verifyEmail: {\n        path: '/email-verification/:token',\n        component: EmailVerification,\n        exact: true\n    },\n    passwordReset: {\n        path: '/password-reset/perform-reset/:token',\n        component: PasswordReset,\n        exact: true\n    },\n    initiatePasswordReset: {\n        path: '/password-reset/initiate',\n        component: InitiatePasswordReset,\n        exact: true\n    },\n    deviceVerification: {\n        path: '/device-verification/:token',\n        component: DeviceVerification,\n        exact: true\n    }\n}\n\nexport default Object.values<IRoute>(routeMap as any)","import React from 'react'\nimport { useParams, Redirect } from 'react-router-dom'\nimport useAsyncAction from '../../../hooks/useAsyncAction'\nimport { checkPasswordResetToken } from '../../../api/auth'\nimport { routeMap } from '../../routes'\n\nimport InfoContainer from '../../../components/InfoContainer'\nimport UnderlinedLink from '../../../components/UnderlinedLink'\nimport AsyncContainer from '../../../components/AsyncContainer'\nimport { PasswordResetForm } from './components'\nimport useForm from '../../../hooks/useForm'\n\ninterface IPasswordResetUrlParams {\n    token: string\n}\n\nconst PasswordReset = () => {\n    const { token } = useParams<IPasswordResetUrlParams>()\n    const [\n        { status: tokenCheckStatus },\n        { performAction: verifyToken, asyncActions: tokenCheckActions }\n    ] = useAsyncAction<string>({ action: checkPasswordResetToken })\n\n    React.useEffect(() => {\n        if (tokenCheckStatus === 'uninitiated') {\n            verifyToken(token)\n        }\n    }, [tokenCheckStatus, verifyToken, token])\n\n    const [formState, formActions] = useForm<void, any>({\n        successSnackbarMessage: 'Password successfully reset',\n        failureSnackbarMessage: 'Password reset failed'\n    })\n\n    if (formState.status === 'submit-success') {\n        return <Redirect to='/' />\n    }\n\n    if (formState.status === 'submit-fail') {\n        // This delay will make sure the failure snackbar is shown to the user before re-rendering\n        setTimeout(() => {\n            formActions.resetFormState()\n            // this will force the component to check the validity of token again and hence re-render\n            // this will make sure that if the failure was due to invalid token, it is informed to the user\n            tokenCheckActions.setUninitiated()\n        }, 2000);\n    }\n\n    return <AsyncContainer\n        asyncStatus={tokenCheckStatus}\n        errorContent={\n            <InfoContainer\n                title='This link is either invalid or has already expired'\n                subtitle={\n                    <>\n                        Please visit{' '}\n                        <UnderlinedLink to={routeMap.account.path}>\n                            Account Page\n                        </UnderlinedLink>\n                        {' '}to generate a new password reset token\n                    </>\n                }\n            />\n        }\n        successContent={\n            <InfoContainer\n                title={<PasswordResetForm\n                    passwordResetToken={token}\n                    formState={formState}\n                    formActions={formActions}\n                />}\n                subtitle={\n                    <UnderlinedLink to={routeMap.home.path}>\n                        Go to home page\n                    </UnderlinedLink>\n                }\n            />\n        }\n    />\n}\n\nexport default PasswordReset\n","import React from 'react'\nimport { Redirect } from 'react-router-dom'\n\nimport useAsyncState from '../../../hooks/useAsyncState'\nimport useAccount from '../../../hooks/useAccount'\nimport { requestPasswordResetToken } from '../../../api/auth'\nimport InfoContainer from '../../../components/InfoContainer'\nimport UnderlinedLink from '../../../components/UnderlinedLink'\nimport { routeMap } from '../../routes'\nimport LoadingDialog from '../../../features/LoadingDialog'\n\nconst InitiatePasswordReset: React.FC = () => {\n    const [{ meta: passwordResetToken, status: tokenGenStatus }, tokenGenStateActions] = useAsyncState<{ token: string }>()\n\n    const { user, emailVerified } = useAccount()[0]\n\n    React.useEffect(() => {\n        if (user && tokenGenStatus === 'uninitiated') {\n            tokenGenStateActions.setLoading()\n            requestPasswordResetToken(user.username)\n                .then((res) => tokenGenStateActions.setSuccess(res.data.token))\n                .catch(tokenGenStateActions.setFailure)\n        }\n    })\n\n    if (!user) {\n        return <Redirect to={routeMap.home.path} />\n    }\n\n    if (!emailVerified) {\n        return (\n            <InfoContainer\n                title='You need to verify your email before resetting your password'\n                subtitle={\n                    <>\n                        Please visit{' '}\n                        <UnderlinedLink to={routeMap.account.path}>\n                            Account Page\n                        </UnderlinedLink>\n                        {' '}to verify your email\n\n                    </>\n                }\n            />\n        )\n    }\n\n    if (tokenGenStatus === 'loading') {\n        return <LoadingDialog open loadingText='Generating password reset token' />\n    }\n\n    if (tokenGenStatus === 'fail') {\n        return (\n            <InfoContainer\n                title='Failed to generate password reset token'\n                subtitle='Please try again after a while'\n            />\n        )\n    }\n\n    return (\n        <InfoContainer\n            title='Password reset token generated'\n            subtitle={`The token has been mailed to your registered email id: ${passwordResetToken && passwordResetToken.token}`}\n        />\n    )\n}\n\nexport default InitiatePasswordReset\n","import React from 'react'\nimport { useParams } from 'react-router-dom'\nimport useAsyncState from '../../../hooks/useAsyncState'\nimport LoadingDialog from '../../../features/LoadingDialog'\nimport { performDeviceVerification } from '../../../api/auth'\nimport AsyncContainer from '../../../components/AsyncContainer'\nimport InfoContainer from '../../../components/InfoContainer'\nimport UnderlinedLink from '../../../components/UnderlinedLink'\nimport { routeMap } from '../../routes'\n\ninterface IDeviceVerificationUrlParams {\n    token: string\n}\n\nconst DeviceVerification = () => {\n    const { token: deviceVerificationToken } = useParams<IDeviceVerificationUrlParams>()\n    const [{ status: deviceVerificationStatus }, { setLoading, setFailure, setSuccess }] = useAsyncState<any>()\n\n    React.useEffect(() => {\n        if (deviceVerificationStatus === 'uninitiated') {\n            setLoading()\n            performDeviceVerification(deviceVerificationToken)\n                .then(setSuccess)\n                .catch(setFailure)\n        }\n    }, [deviceVerificationToken, deviceVerificationStatus, setLoading, setSuccess, setFailure])\n\n    if (deviceVerificationStatus === 'uninitiated' || deviceVerificationStatus === 'loading') {\n        return <LoadingDialog open loadingText='Verifying Link' />\n    }\n\n    return (\n        <AsyncContainer\n            asyncStatus={deviceVerificationStatus}\n            successContent={<InfoContainer\n                title='Thank you for verifying your device/location'\n                subtitle={\n                    <UnderlinedLink to={routeMap.login.path}>\n                        Go to login page\n                    </UnderlinedLink>\n                }\n            />}\n            errorContent={<InfoContainer\n                title='This link is either invalid or has already expired'\n                subtitle={\n                    <>\n                        Please visit\n                        {' '}\n                        <UnderlinedLink to={routeMap.login.path}>\n                            Login Page\n                        </UnderlinedLink>\n                        {' '}\n                        to generate a new link to verify the device/location\n                    </>\n                }\n            />}\n        />\n    )\n}\n\nexport default DeviceVerification\n","import routes, { routeMap } from './routes'\n\nexport { routeMap }\nexport default routes","import React from 'react';\nimport { NavLink } from 'react-router-dom'\n\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Divider from '@material-ui/core/Divider';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\n\nimport useAccount from '../../../../hooks/useAccount';\nimport { routeMap } from '../../../../routes';\n\ninterface IAccountMenuProps {\n    anchorElement: null | HTMLElement\n    onCloseMenu: React.MouseEventHandler\n}\n\n\nconst useStyles = makeStyles((theme) => createStyles({\n    loggedInAs: {\n        marginRight: theme.spacing(1)\n    },\n    username: {\n        fontWeight: theme.typography.fontWeightBold\n    }\n}))\n\nconst AccountMenu: React.FC<IAccountMenuProps> = ({ anchorElement, onCloseMenu }) => {\n    const classes = useStyles()\n    const [{ user, loggedIn }, { logout }] = useAccount()\n\n    if (!loggedIn) {\n        return null\n    }\n\n    const username = user && user.username\n\n    return (\n        <Menu\n            keepMounted\n            id=\"account-menu\"\n            anchorEl={anchorElement}\n            getContentAnchorEl={null}\n            anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n            transformOrigin={{ vertical: 'top', horizontal: 'center' }}\n            open={Boolean(anchorElement)}\n            onClose={onCloseMenu}\n        >\n            <MenuItem component={NavLink} to={routeMap.account.path}>\n                <Typography className={classes.loggedInAs}>Logged in as:</Typography>\n                <Typography className={classes.username} noWrap>\n                    {username ? username : '-'}\n                </Typography>\n            </MenuItem>\n            <Divider />\n            <MenuItem onClick={logout as any}>Logout</MenuItem>\n        </Menu>\n    );\n}\n\n\nexport default AccountMenu\n","import React from 'react'\nimport AccountIcon from '@material-ui/icons/AccountCircle';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport useAccount from '../../../../hooks/useAccount'\nimport AccountMenu from './AccountMenu';\n\nconst AccountAvatar = () => {\n    // eslint-disable-next-line\n    const [account, _, { loading: isAccountLoading }] = useAccount()\n    const [menuAnchorElement, setMenuAnchorElement] = React.useState<null | HTMLElement>(null);\n\n    const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n        console.log('click')\n        setMenuAnchorElement(event.currentTarget);\n    };\n\n    const handleClose = () => {\n        console.log('close')\n        setMenuAnchorElement(null);\n    };\n\n    if (isAccountLoading || !account.loggedIn) {\n        return null\n    }\n\n    return (\n        <>\n            <IconButton onClick={handleClick}>\n                <AccountIcon fontSize='large' />\n            </IconButton>\n            <AccountMenu\n                anchorElement={menuAnchorElement}\n                onCloseMenu={handleClose}\n            />\n        </>\n    )\n}\n\nexport default AccountAvatar\n","import React from 'react'\nimport { NavLink, NavLinkProps } from 'react-router-dom'\nimport Button, { ButtonProps } from '@material-ui/core/Button'\n\nimport { routeMap } from '../../../routes'\nimport useAccount from '../../../hooks/useAccount'\n\nconst LinkButton: React.FC<ButtonProps & NavLinkProps> = (props) => {\n    return <Button component={NavLink} {...props} />\n}\n\nconst LoginButton = () => {\n    // eslint-disable-next-line\n    const [account, _, { loading: isAccountLoading }] = useAccount()\n\n    if (account.loggedIn || isAccountLoading) {\n        return null\n    }\n\n    return (\n        <>\n            <LinkButton to={routeMap.login.path} variant='text' color='inherit'>\n                Login\n            </LinkButton>\n            <LinkButton to={routeMap.register.path} variant='outlined' color='inherit'>\n                Register\n            </LinkButton>\n        </>\n    )\n}\n\nexport default LoginButton\n","import React from 'react'\n\nimport IconButton from '@material-ui/core/IconButton'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport LightThemeIcon from '@material-ui/icons/WbSunny'\nimport DarkThemeIcon from '@material-ui/icons/NightsStay'\n\nimport useAppTheme from '../../../hooks/useAppTheme'\n\nconst ThemeSwitcher = () => {\n    const [activeTheme, { setActiveTheme }] = useAppTheme()\n    const isDarkTheme = activeTheme === 'dark'\n\n    const renderIcon = () => {\n        if (isDarkTheme) {\n            return DarkThemeIcon\n        }\n\n        return LightThemeIcon\n    }\n\n    const handleClick = () => {\n        if (isDarkTheme) {\n            return setActiveTheme('light')\n        }\n\n        setActiveTheme('dark')\n    }\n\n    const Icon = renderIcon()\n    return (\n        <Tooltip title='Toggle light/dark theme'>\n            <IconButton onClick={handleClick}>\n                <Icon fontSize='large' />\n            </IconButton>\n        </Tooltip>\n    )\n}\n\nexport default ThemeSwitcher\n","import React from 'react'\nimport { NavLink } from 'react-router-dom';\n\nimport MaterialAppBar from '@material-ui/core/AppBar'\nimport { Toolbar, Typography } from '@material-ui/core'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\nimport { grey } from '@material-ui/core/colors';\n\nimport { routeMap } from '../../routes';\nimport { AccountAvatar, AccountActions, ThemeSwitcher } from './components'\n\nconst kStyleRemoveLink = {\n    color: 'inherit',\n    textDecoration: 'none',\n    \"&:hover\": {\n        color: 'inherit',\n        textDecoration: 'none'\n    },\n    outline: 0\n}\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        flexGrow: 1,\n        '& .MuiSvgIcon-root': {\n            fill: theme.palette.primary.contrastText\n        }\n    },\n    title: {\n        flexGrow: 1,\n        ...kStyleRemoveLink,\n        '&:hover': {\n            ...kStyleRemoveLink[\"&:hover\"],\n            color: grey[400]\n        },\n        transition: 'color 0.5s ease-in'\n    },\n    noLink: kStyleRemoveLink\n}))\n\nconst AppBar = () => {\n    const classes = useStyles()\n\n    return (\n        <MaterialAppBar className={classes.root}>\n            <Toolbar>\n                <Typography\n                    variant='h6'\n                    className={classes.title}\n                    component={NavLink}\n                    to={routeMap.home.path}\n                >\n                    Personal Archive\n                </Typography>\n                <ThemeSwitcher />\n                <AccountActions />\n                <AccountAvatar />\n            </Toolbar>\n        </MaterialAppBar>\n    )\n}\n\nexport default AppBar\n","import React from 'react'\n\nimport AppBar from '../AppBar/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\n\nconst AppScaffold: React.FC = ({ children }) => {\n    return (\n        <>\n            <AppBar />\n            <Toolbar />\n            {children}\n        </>\n    )\n}\n\nexport default AppScaffold\n","import React from 'react'\nimport { Typography, Grid } from '@material-ui/core'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\n\nimport { routeMap } from '../routes'\nimport LinkTypography from '../../components/LinkTypography'\n\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n        height: '100%',\n        padding: theme.spacing(8)\n    },\n}))\n\nconst PageNotFound = () => {\n    const classes = useStyles()\n    return (\n        <Grid\n            container\n            direction='column'\n            justify='center'\n            className={classes.root}\n        >\n            <Typography variant='h1'>Error</Typography>\n            <Typography paragraph>We could not find the page you were looking for</Typography>\n            <LinkTypography to={routeMap.home.path}>Go back home</LinkTypography>\n        </Grid>\n    )\n}\n\nexport default PageNotFound\n","import React from 'react'\nimport { Helmet } from 'react-helmet'\nimport { BrowserRouter, Route, Switch } from 'react-router-dom'\n\nimport useAccount from '../hooks/useAccount'\nimport SplashScreen from '../features/SplashScreen/SplashScreen'\nimport routes from '../routes'\nimport AppScaffold from '../features/AppScaffold/AppScaffold'\nimport PageNotFound from '../routes/pages/PageNotFound'\n\nconst AppContent = () => {\n    const { loading, uninitiated } = useAccount({ autoFetch: true })[2]\n\n    if (uninitiated || loading) {\n        return <SplashScreen />\n    }\n\n    return (\n        <BrowserRouter>\n            <AppScaffold>\n                <Switch>\n                    {routes.map(route => <Route {...route} key={route.path} />)}\n                    <Route path='*' component={PageNotFound} />\n                </Switch>\n            </AppScaffold>\n        </BrowserRouter>\n    )\n}\n\nconst App = () => {\n    return (\n        <>\n            <Helmet\n                titleTemplate='%s | Personal Archive'\n                defaultTitle='Personal Archive'\n            />\n            <AppContent />\n        </>\n    )\n}\n\nexport default App","import App from \"./App\";\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\n\nimport { Provider as StoreProvider } from 'react-redux'\nimport store from './store'\n\nimport AppThemeProvider from './theme/AppThemeProvider'\n\nimport { SnackbarProvider } from 'notistack'\n\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport App from './app'\n\nReactDOM.render(\n    <StoreProvider store={store}>\n        <AppThemeProvider>\n            <SnackbarProvider>\n                <CssBaseline />\n                <App />\n            </SnackbarProvider>\n        </AppThemeProvider>\n    </StoreProvider>,\n    document.getElementById('root')\n)","import * as auth from './auth'\nimport * as posts from './posts'\n\nexport { auth, posts }\nexport * from './account'","import { createSlice, SliceCaseReducers } from '@reduxjs/toolkit'\nimport AccountState from './AccountState'\nimport { updateAccountAsync } from './actions'\n\nconst initialState: AccountState = { account: { loggedIn: false } }\n\nconst accountSlice = createSlice<AccountState, SliceCaseReducers<AccountState>>({\n    name: 'account-slice',\n    initialState: initialState,\n    reducers: {},\n    extraReducers: builder => {\n        builder.addCase(updateAccountAsync.fulfilled, (state, action) => {\n            state.account = action.payload\n        })\n    }\n})\n\nexport const reducer = accountSlice.reducer","import AccountState from \"./AccountState\";\nimport { reducer } from \"./account-slice\";\nimport * as actions from './actions'\n\nexport { reducer, actions }\nexport default AccountState","import { createSlice, SliceCaseReducers } from \"@reduxjs/toolkit\";\nimport PostsState from \"./PostsState\";\nimport postsAdapter from \"./posts-adapter\";\nimport { getAllPostsAsync, deletePostAsync } from './actions'\n\nconst postsSlice = createSlice<PostsState, SliceCaseReducers<PostsState>>({\n    name: 'posts-slice',\n    initialState: postsAdapter.getInitialState(),\n    reducers: {},\n    extraReducers: builder => {\n        builder.addCase(getAllPostsAsync.fulfilled, postsAdapter.setAll)\n        builder.addCase(deletePostAsync.fulfilled, postsAdapter.removeOne)\n    }\n})\n\nexport const reducer = postsSlice.reducer","import { reducer } from \"./posts-slice\";\nimport PostsState from \"./PostsState\";\n\nexport { reducer }\nexport default PostsState","import { AsyncThunk } from \"@reduxjs/toolkit\";\n\nconst asyncMatchFulfilled = (asyncAction: AsyncThunk<any, any, any>, action: any) =>\n    asyncAction.fulfilled.match(action)\n\nexport default asyncMatchFulfilled","import monitorLoginMiddleware from \"./monitor-login\";\n\nexport default [monitorLoginMiddleware]","import {\n    loginAsync,\n    logoutAsync,\n    updateAccountAsync,\n    createAccountAsync,\n    enableMultifactorAuthAsync,\n    disableMultifactorAuthAsync,\n    editAccountAsync,\n    resetPasswordAsync\n} from '../actions'\nimport { asyncMatchFulfilled } from \"../../../utils\";\nimport { ThunkMiddleware } from \"../../../@types/thunk-middleware\";\nimport { AsyncThunk } from '@reduxjs/toolkit';\n\ntype AnyAsyncThunk = AsyncThunk<any, any, any>\n\nconst matchAtleastOne = (actionToMatch: AnyAsyncThunk, actions: AnyAsyncThunk[]) => {\n    return actions.some(action => asyncMatchFulfilled(action, actionToMatch))\n}\n\nconst monitorLoginMiddleware: ThunkMiddleware = (api) => (next) => (action) => {\n    const actionsThatChangeLoginInfo = [\n        loginAsync,\n        logoutAsync,\n        createAccountAsync,\n        editAccountAsync,\n        enableMultifactorAuthAsync,\n        disableMultifactorAuthAsync,\n        resetPasswordAsync\n    ]\n    const hasLoginInfoChanged = matchAtleastOne(action, actionsThatChangeLoginInfo)\n\n    if (hasLoginInfoChanged) {\n        api.dispatch(updateAccountAsync())\n    }\n\n    next(action)\n}\n\nexport default monitorLoginMiddleware","import onFilterChange from './monitor-posts-filter'\n\nexport default [onFilterChange]","import { Middleware, ThunkDispatch, AnyAction } from \"@reduxjs/toolkit\";\n\nimport { setFilter, resetFilter } from \"../../filter-state/filter-slice\";\nimport { getAllPostsAsync } from \"../actions\";\nimport { initialState as initialFilterState } from \"../../filter-state/FilterState\";\n\ntype Dispatch = ThunkDispatch<any, {}, AnyAction>\nconst onFilterChange: Middleware<{}, any, Dispatch> = ({\n    dispatch\n}) => (next) => (action) => {\n    if (setFilter.match(action)) {\n        dispatch(getAllPostsAsync(action.payload))\n    }\n\n    if (resetFilter.match(action)) {\n        dispatch(getAllPostsAsync(initialFilterState))\n    }\n\n    next(action)\n}\n\nexport default onFilterChange\n","import accountStateMiddlewares from './states/account-state/middlewares';\nimport postsMiddlewares from './states/posts-state/middlewares'\n\nexport default [...accountStateMiddlewares, ...postsMiddlewares]\n\n","import { configureStore, getDefaultMiddleware } from \"@reduxjs/toolkit\";\nimport { reducer as formReducer } from 'redux-form'\n\nimport { reducer as accountReducer } from \"./states/account-state\";\nimport { reducer as postsReducer } from \"./states/posts-state\";\nimport { reducer as filterReducer } from \"./states/filter-state\";\nimport { themeReducer } from './states/theme-state'\nimport middlewares from './middlewares'\nimport { useDispatch } from \"react-redux\";\n\nconst store = configureStore({\n    reducer: {\n        account: accountReducer,\n        posts: postsReducer,\n        filter: filterReducer,\n        theme: themeReducer,\n        form: formReducer\n    },\n    middleware: getDefaultMiddleware({ serializableCheck: false }).concat(middlewares)\n})\n\nexport type RootState = ReturnType<typeof store.getState>\nexport type AppDispatch = ReturnType<typeof store.dispatch>\nexport const useAppDispatch = (): AppDispatch => useDispatch<AppDispatch>()\nexport default store","import store from \"./store\";\n\nexport default store\nexport * from './store'","import React from 'react'\nimport Button, { ButtonProps } from '@material-ui/core/Button'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport { makeStyles, createStyles } from '@material-ui/core/styles'\n\n\nexport interface ILoadingButtonProps extends ButtonProps {\n    loading?: boolean\n}\n\nconst useStyles = makeStyles((theme) => createStyles({\n    stateIcon: {\n        marginRight: theme.spacing(1.5),\n        verticalAlign: 'middle'\n    }\n}))\n\nconst LoadingButton: React.FC<ILoadingButtonProps> = ({\n    loading = false,\n    children,\n    ...buttonProps\n}) => {\n    const classes = useStyles()\n\n    return (\n        <Button {...buttonProps} disabled={loading}>\n            {loading && <CircularProgress thickness={8} size={14} className={classes.stateIcon} />}\n            {children}\n        </Button>\n    )\n}\n\nexport default LoadingButton\n","import { useState, useEffect } from \"react\"\nimport { useSnackbar } from \"notistack\"\n\nexport interface IUseFormHookActions<Meta, Error> {\n    resetFormState: VoidCallback\n    setFormSubmitting: VoidCallback\n    setFormSubmitFail: ValueCallback<Error>\n    setFormSubmitSuccess: ValueCallback<Meta>\n}\n\nexport interface IFormState<Meta = any, Error = any> {\n    status: IFormStatus\n    meta?: Meta\n    error?: Error\n}\n\nexport type IFormStatus = 'initial' | 'submitting' | 'submit-fail' | 'submit-success'\ntype IUseFormHook<M, E> = Hook<IFormState<M, E>, IUseFormHookActions<M, E>>\n\ninterface IUseFormHookOpts {\n    successSnackbarMessage: string\n    failureSnackbarMessage: string\n}\n\nconst useForm = <Meta = void, Error = void>({ successSnackbarMessage, failureSnackbarMessage }: IUseFormHookOpts): IUseFormHook<Meta, Error> => {\n    const [formState, setFormState] = useState<IFormState>({ status: 'initial' })\n    const [snackbarShown, setSnackbarShown] = useState(false)\n    const { enqueueSnackbar } = useSnackbar()\n\n    useEffect(() => {\n        if (snackbarShown) {\n            return\n        }\n\n        if (formState.status === 'submit-success') {\n            enqueueSnackbar(successSnackbarMessage, { variant: 'success' })\n            setSnackbarShown(true)\n        }\n\n        if (formState.status === 'submit-fail') {\n            enqueueSnackbar(failureSnackbarMessage, { variant: 'error' })\n            setSnackbarShown(true)\n        }\n    }, [snackbarShown, formState, setFormState, enqueueSnackbar, successSnackbarMessage, failureSnackbarMessage])\n\n    return [\n        formState,\n        {\n            resetFormState: () => setFormState({ status: 'initial', meta: undefined, error: undefined }),\n            setFormSubmitSuccess: (meta: Meta) => setFormState({ status: 'submit-success', meta }),\n            setFormSubmitFail: (error: Error) => setFormState({ status: 'submit-fail', error }),\n            setFormSubmitting: () => setFormState({ status: 'submitting' })\n        }\n    ]\n}\n\nexport default useForm","export * from './posts-get'\nexport * from './posts-create'\nexport * from './posts-delete'\nexport * from './posts-edit'\nexport * from './shared'","import { createSlice, SliceCaseReducers } from \"@reduxjs/toolkit\";\nimport FilterState, { initialState } from \"./FilterState\";\n\nconst filterSlice = createSlice<FilterState, SliceCaseReducers<FilterState>>({\n    name: 'post-filters',\n    initialState,\n    reducers: {\n        setFilter: (_, action) => action.payload,\n        resetFilter: () => initialState\n    }\n})\n\nexport const { setFilter, resetFilter } = filterSlice.actions\nexport const { reducer, actions } = filterSlice","import PostFormView from './PostForm-View'\nimport validator from './validator'\n\nexport * from './typings'\nexport { validator }\nexport default PostFormView","// Add createdAt in server\ninterface PostModel {\n    id: string\n    title: string\n    userId: string\n    link?: string\n    comment?: string\n    tags: string[]\n    createdAt: Date\n    updatedAt: Date\n}\n\nexport const postFromJson = (json: any): PostModel => {\n    return {\n        id: json['_id'],\n        title: json['title'],\n        userId: json['userId'],\n        link: json['link'],\n        comment: json['comment'],\n        tags: json['tags'],\n        createdAt: new Date(json['createdAt']),\n        updatedAt: new Date(json['updatedAt'])\n    }\n}\n\nexport default PostModel","import { Selector } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../../store\";\nimport FilterState from \"./FilterState\";\n\nexport const selectFilterState: Selector<RootState, FilterState> = (state) => state.filter","import React from 'react'\nimport LoadingButton from './LoadingButton'\nimport { IFormStatus } from '../hooks/useForm'\nimport { ButtonProps } from '@material-ui/core'\n\ninterface IFormSubmitButtonProps {\n    formState: IFormStatus\n    formId: string\n}\n\nconst FormSubmitButton: React.FC<IFormSubmitButtonProps & ButtonProps> = ({\n    children,\n    formState,\n    formId,\n    ...buttonProps\n}) => {\n    return (\n        <LoadingButton\n            form={formId}\n            type='submit'\n            loading={formState === 'submitting'}\n            {...buttonProps}\n        >\n            {children}\n        </LoadingButton>\n    )\n}\n\nexport default FormSubmitButton"],"sourceRoot":""}